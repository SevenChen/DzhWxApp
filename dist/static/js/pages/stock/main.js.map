{"version":3,"sources":["webpack:///./src/charts/Chart.js","webpack:///./src/pages/stock/index.vue","webpack:///./src/charts/Canvas.js","webpack:///./src/charts/DataProvider.js","webpack:///./src/charts/KlineChart.js","webpack:///./src/charts/MinChart.js","webpack:///./src/pages/stock/main.js","webpack:///src/pages/stock/index.vue","webpack:///./src/pages/stock/index.vue?fb4d","webpack:///./src/pages/stock/index.vue?dff6"],"names":["Chart","dataProvider","options","hasVolume","store","state","volumeObj","indexOf","stock","fontSize","canvas","pixelRadio","upColor","downColor","timeAxisHeight","gridLineWidth","gridLineColor","tickColor","tickBackgroundColor","pointerLineColor","initData","show","remove","canvasWidth","canvasHeight","clear","initChart","drawBackground","drawChart","drawAxisTicks","toggleMask","drawCanvas","yAxisTicks","height","mainChartHeight","volumeChartHeight","console","warn","forEach","eachTick","drawText","text","x","y","withBackground","formatNumber","isUp","color","position","textMove","drawLine","drawLineDash","push","formatYAxisLabel","full","textWidth","measureText","textX","textY","pressed","deltaX","scale","formatDate","Canvas","width","eventListener","canvasId","charts","currentChartIndex","ctx","wx","createCanvasContext","ratio","chart","initCanvas","addChart","redraw","setCanvas","index","splice","draw","event","lastX","changedTouches","getCurrentChart","touch","moveToX","moveToY","result","panMove","pageX","pageY","target","offsetTop","x1","y1","x2","y2","lineWidth","style","beginPath","setLineWidth","setStrokeStyle","moveTo","normalizeDrawLinePoint","lineTo","stroke","step","count","Math","floor","sqrt","xv","yv","i","pointX","pointY","fontStyle","backgroundStyle","min","max","setFillStyle","rect","fill","setFontSize","fillText","points","y0","strokeColor","fillStyle","eachPoint","setLineJoin","length","closePath","strokeStyle","radius","arc","PI","point","intPoint","parseInt","replace","oneMinute","oneDay","defaultTimeInfo","now","Date","year","getFullYear","month","getMonth","slice","day","getDate","date","join","RiQi","JiaoYiShiJianDuan","KaiShiShiJian","JieShuShiJian","KaiShiRiQi","JieShuRiQi","JiHeJingJiaDianShu","ShiQu","ZuoShou","getTime","dateParam","hourMinute","timeZone","substr","hour","minute","UTC","DataProvider","params","klineDataStore","wsobj","maDataStore","minDataStore","withMA","klineQuery","query","then","data","Data","getMA","callback","request","subscribe","start","log","Error","kline","ma","ShiJian","maResult","JieGuo","MA5","MA10","MA20","MA30","cancel","qid","_params","name","parameter","ShuJu","catch","timeInfo","times","minCache","lastClose","minTimes","lastTime","startTime","endTime","eachTime","prefixMinute","unshift","time","firstTime","overDays","overTime","oldTime","minData","ckey","undefined","_initMinCache","eachData","_updateMinCache","temp","setStorage","key","success","fail","QingPan","that","getStorage","saveDataLocal","KlineChart","cache","concat","period","split","maxCount","Number","MAX_VALUE","minCount","maxPreLoadCount","hasMoreData","reCalculate","initCount","subscribeKline","hasChart","pixelPerWithSeparator","pixelPer","MIN_VALUE","maxVolume","ZuiGaoJia","ZuiDiJia","ChengJiaoLiang","candleChartHeight","candleYPixelRadio","volumeYPixelRadio","hasDay","open","close","maPoints","halfPixelPer","lastLabel","lastDrawIndex","timeArr","ShouPanJia","KaiPanJia","xAxisLabel","formatXAxisLabel","drawCandle","drawVolume","pix","drawXAxisGridLine","round","eachPoints","drawPath","pressPoint","drawYAxisGridLine","drawTooltip","startX","getColor","label","labelColor","top","low","abs","drawRectEmpty","drawRect","volume","move","cacheCount","requestCount","currentCount","leftPosition","restCount","leftOffsetCount","loadMoreData","loading","lastDataProvider","getKline","klinePromise","maPromise","klineData","cacheStartTime","maData","maIndex","maLength","eachKline","kTime","eachMA","maTime","size","offsetCount","MinChart","dateArr","removeStorage","subscribeMin","hasAvgPrice","maxOffset","ChengJiaoJia","minChartHeight","minYPixelRadio","hasDate","pricePoints","avgPricePoints","lastPrice","JunJia","timeFormat","stock2bit","fillPath","minTime","price","drawCircle","rightText","app","$mount","config","navigationBarTitleText"],"mappings":"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A3RA,uBA2RA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA,wBADA;AAEA,8DAFA;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAJA;;AAMA;AACA;AACA,iBAfA;AAgBA;AAAA;AAAA;AAhBA;AAkBA,SAzTA;AA0TA,aA1TA,mBA0TA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;;AAEA;AACA,SAlUA;AAmUA,eAnUA,mBAmUA,QAnUA,EAmUA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAtUA,KAlGA;AA0aA,UA1aA,oBA0aA;AACA;AACA,KA5aA;AA6aA,YA7aA,sBA6aA;AACA;AACA;AACA,KAhbA;AAibA,qBAjbA,+BAibA;AACA;AACA;AACA;AACA,8EADA;AAEA,wGAFA;AAGA;AAHA;AAKA;AAzbA,G;;;;;;;AC/KA,yC;;;;;;;;ACAA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"static/js/pages/stock/main.js","sourcesContent":["import { formatNumber, formatDate } from '@/utils/util.js'\nimport store from '@/store/index.js'\n\nexport default class Chart {\n\n  static formatNumber = formatNumber;\n  static formatDate = formatDate;\n\n  constructor(dataProvider, options = {}) {\n    this.dataProvider = dataProvider;\n    this.options = options;\n  }\n\n  initData() {\n    // // 设置画详细提示框方法,设置为false则为不显示\n    // let drawTooltip = this._options.drawTooltip;\n    // this.drawTooltip = drawTooltip === false ? noop : ((typeof drawTooltip === 'function') ? drawTooltip : this.drawTooltip);\n\n    // 图表通用参数配置\n    //this.hasVolume = this.options.hasVolume != null ? this.options.hasVolume : true;\n    this.hasVolume = store.state.volumeObj.indexOf(this.options.stock) == -1 ? true :false;\n    this.fontSize = this.options.fontSize || 10 * this.canvas.pixelRadio;\n    this.upColor = this.options.upColor || '#e30000';\n    this.downColor = this.options.downColor || '#1ca049';\n\n    // 时间轴的高度为fontSize + 4\n    this.timeAxisHeight = this.fontSize + 4;\n\n    this.gridLineWidth = 0.5;\n    this.gridLineColor = '#dddddd';\n    this.tickColor = '#555555';\n    this.tickBackgroundColor = '#eeeeee';\n\n    this.pointerLineColor = '#999999';\n  }\n\n  setCanvas(canvas) {\n    if (!this.canvas) {\n      // 初始数据\n      this.canvas = canvas;\n      this.initData();\n    }\n  }\n\n  show() {\n    this.canvas && this.canvas.show(this);\n  }\n\n  remove() {\n    this.canvas && this.canvas.remove(this);\n  }\n\n  redraw() {\n    //if (this.canvas && this.canvas.getCurrentChart() === this &&  //debug\n    if(this.canvas && this.canvas.canvasWidth && this.canvas.canvasHeight) {\n      this.canvas.clear();\n      this.initChart();\n      this.drawBackground();\n      this.drawChart();\n      this.drawAxisTicks();\n      this.canvas && this.canvas.toggleMask(false);\n      this.canvas.drawCanvas();\n    }\n  }\n\n  initChart() {\n    this.yAxisTicks = [];\n    const timeAxisHeight = this.timeAxisHeight;\n    const hasVolume = this.hasVolume;\n\n    // 默认主图和量图的比例为7 : 3\n    const height = this.canvas.canvasHeight - timeAxisHeight;\n    if (hasVolume) {\n      this.mainChartHeight = height * 0.7;\n      this.volumeChartHeight = height * 0.3;\n    } else {\n      this.mainChartHeight = height;\n      this.volumeChartHeight = 0;\n    }\n  }\n\n  /* eslint class-methods-use-this: 0 */\n  drawBackground() {\n    console.warn('not implemented');\n  }\n\n  /* eslint class-methods-use-this: 0 */\n  drawChart() {\n    console.warn('not implemented');\n  }\n\n  drawAxisTicks() {\n    const yAxisTicks = this.yAxisTicks;\n    if (yAxisTicks) {\n      const canvas = this.canvas;\n      const fontSize = this.fontSize;\n      const tickBackgroundColor = this.tickBackgroundColor;\n      yAxisTicks.forEach((eachTick) => {\n        canvas.drawText(eachTick.text, eachTick.x, eachTick.y, fontSize,\n          eachTick.tickColor, eachTick.withBackground && tickBackgroundColor);\n      });\n    }\n  }\n\n  formatYAxisLabel(text) {\n    return Chart.formatNumber(text, 2, 'K/M', false);\n  }\n\n  formatXAxisLabel(text) {\n    return text;\n  }\n\n  getColor(isUp) {\n    return isUp ? this.upColor : this.downColor;\n  }\n\n  drawYAxisGridLine(y, text, color = this.gridLineColor, position = 'top', withBackground = false, tickColor = this.tickColor,textMove = 0) {\n    if(position == 'bottom'){\n      this.canvas.drawLine(0, y, this.canvas.canvasWidth, y, this.gridLineWidth, color);\n    }else{\n      this.canvas.drawLineDash(0, y, this.canvas.canvasWidth, y, this.gridLineWidth, color);\n    }\n\n    if (text) {\n      // 记录Y轴坐标位置\n      const yAxisTicks = this.yAxisTicks;\n      if(textMove >0 )\n        y-=textMove\n      yAxisTicks.push({\n        text: this.formatYAxisLabel(text),\n        x: 2*this.canvas.pixelRadio,\n        y: (position === 'top' ? y - 2 : y + this.fontSize + 2),\n        tickColor,\n        withBackground,\n      });\n    }\n  }\n\n  drawXAxisGridLine(x, text, color = this.gridLineColor, position = 'middle', withBackground = false, full = false, tickColor = this.tickColor) {\n    this.canvas.drawLine(x, 0, x, full ? this.canvas.canvasHeight : this.mainChartHeight, this.gridLineWidth, color);\n    if (text) {\n      const textWidth = this.canvas.measureText(text);\n      const fontSize = this.fontSize;\n      const textX = position === 'middle' ? x - (textWidth / 2) : x;\n      const textY = this.mainChartHeight + fontSize + 2;\n\n      this.canvas.drawText(text, textX, textY, fontSize, tickColor,\n        withBackground && this.tickBackgroundColor);\n    }\n  }\n\n  /* eslint no-unused-vars: 0 */\n  panMove(pressed, x, y, deltaX) {\n  }\n\n  /* eslint no-unused-vars: 0 */\n  pinchMove(scale) {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/Chart.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-468de450\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../../node_modules/mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-468de450\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/pages/stock/index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-468de450\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-468de450\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/stock/index.vue\n// module id = 151\n// module chunks = 2","// import Hammer from '../../bower_components/hammerjs/hammer.js';\n\nexport default class Canvas {\n\n  // /* eslint no-undef: 0 */\n  // _pixelRadio = (function () {\n  //   const ctx = document.createElement('canvas').getContext('2d');\n  //   const dpr = window.devicePixelRatio || 1;\n  //   const bsr = ctx.webkitBackingStorePixelRatio ||\n  //     ctx.mozBackingStorePixelRatio ||\n  //     ctx.msBackingStorePixelRatio ||\n  //     ctx.oBackingStorePixelRatio ||\n  //     ctx.backingStorePixelRatio || 1;\n\n  //   return dpr / bsr;\n  // }());\n  pixelRadio = 2;\n\n  constructor({ width, height, eventListener, pixelRadio, canvasId } = {}) {\n    // TODO 无法得到canvas的大小，只能设置默认宽高\n    this.width = width || 350;\n    this.height = height || 500;\n    //this.width = 210;\n    //this.height = 261;\n    this.eventListener = eventListener;\n\n    //this.charts = [];\n    this.charts = '';\n    this.currentChartIndex = 0;\n\n    this.canvasId = canvasId;\n    this.pixelRadio = pixelRadio;\n  }\n\n  initCanvas() {\n    const ctx = this.ctx = wx.createCanvasContext(this.canvasId); // this.ctx = wx.createContext();\n\n    // TODO 初始化ctx缩放比例，canvas大小\n    const ratio = this.pixelRadio;\n    this.canvasWidth = this.width * ratio;\n    this.canvasHeight = this.height * ratio;\n    ctx.scale(1 / ratio, 1 / ratio);\n  }\n\n  redraw(chart) {\n    this.initCanvas();\n    //const currentChart = this.getCurrentChart();\n    //currentChart && currentChart.redraw();\n    //chart && chart.redraw();\n  }\n\n  getCurrentChart() {\n    return this.charts[this.currentChartIndex];\n  }\n\n  show(chart) {\n    /*\n    if (chart) {\n      const index = this.charts.indexOf(chart);\n\n      if (index >= 0) {\n        this.currentChartIndex = index;   //这里好像是一个缓存\n      } else {\n        this.currentChartIndex = this.charts.length;  //\n        this.addChart(chart);\n      }\n    }*/\n\n    this.addChart(chart);\n\n    //this.redraw();\n    this.redraw(chart);\n  }\n\n  hasChart(chart) {\n    return true;      //debug\n    return this.charts.indexOf(chart) >= 0;\n  }\n\n  addChart(chart) {\n    //debug\n    /*\n    const index = this.charts.indexOf(chart);\n    if (index < 0) {\n      this.charts.push(chart);\n      chart.setCanvas(this);\n    }*/\n    chart.setCanvas(this);\n  }\n\n  removeChart(chart) {\n    let index;\n    if (typeof chart === 'number') {\n      index = chart;\n    } else {\n      index = this.charts.indexOf(chart);\n    }\n\n    if (index >= 0) {\n      this.clear();\n      this.currentChartIndex = 0;\n      this.charts.splice(index, 1);\n    }\n  }\n\n  reset() {\n    this.charts = [];\n    this.currentChartIndex = 0;\n    this.clear();\n  }\n\n  clear() {\n    // this.ctx && this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    // 微信小程序画了一次后状态还原，需要重新设置ctx比例\n    this.initCanvas();\n  }\n\n  drawCanvas() {\n    if (this.ctx) {\n      this.ctx.draw();\n      // wx.drawCanvas({\n      //   canvasId: this.canvasId,\n      //   actions: this.ctx.getActions(),\n      // });\n\n      // const context = wx.createContext();\n\n      // context.rect(0, 0, 300, 500);\n      // context.stroke();\n      // wx.drawCanvas({\n      //   canvasId: 1,\n      //   actions: context.getActions(),\n      // });\n    }\n  }\n\n  touchstart(event) {\n    this.lastX = event.changedTouches[0].x * this.pixelRadio;\n  }\n\n  touchmove(event) {\n    const chart = this.getCurrentChart();\n    const touch = event.changedTouches[0];\n    const moveToX = touch.x * this.pixelRadio;\n    const moveToY = touch.y * this.pixelRadio;\n    const deltaX = moveToX - this.lastX;\n    const result = chart && chart.panMove(this.pressed, moveToX, moveToY, deltaX);\n    result && (this.lastX = moveToX);\n  }\n\n  touchend() {\n    this.pressed = false;\n    this.lastX = 0;\n    const chart = this.getCurrentChart();\n    chart && chart.panMove(this.pressed);\n  }\n\n  longtap(event) {\n      this.pressed = true;\n      const chart = this.getCurrentChart();\n      const touch = event.changedTouches[0];\n      const moveToX = touch.pageX * this.pixelRadio;\n      const moveToY = (touch.pageY - event.target.offsetTop) * this.pixelRadio;\n      chart && chart.panMove(this.pressed, moveToX, moveToY);\n  }\n\n  // bindEvent() {\n\n  //   // 绑定事件,hammer相关\n  //   let mc = new Hammer.Manager(this._canvas, {});\n  //   mc.add(new Hammer.Pan({threshold: 10, direction: Hammer.DIRECTION_ALL}));\n  //   mc.add(new Hammer.Press({time: 300}));\n  //   mc.add(new Hammer.Pinch());\n\n  //   let lastDeltaX = 0;\n  //   let lastScale = 1;\n  //   let pressed = false;\n\n  //   mc.on('panstart', (event) => {\n  //     lastDeltaX = 0;\n  //     this._eventListener && this._eventListener(event);\n  //   });\n\n  //   mc.on('panmove panend', (event) => {\n  //     let chart = this.getCurrentChart();\n  //     let deltaX = event.deltaX - lastDeltaX;\n  //     if (event.type === 'panend') {\n  //       pressed = false;\n  //       deltaX = lastDeltaX = 0;\n  //     }\n  //     let result = chart && chart.panMove(pressed, event.center.x, event.center.y, deltaX);\n  //     result && (lastDeltaX += deltaX);\n  //     this._eventListener && this._eventListener(event);\n  //   });\n\n  //   mc.on('press pressup', (event) => {\n  //     pressed = (event.type === 'press');\n  //     let chart = this.getCurrentChart();\n  //     chart && chart.panMove(pressed, event.center.x, event.center.y);\n  //     this._eventListener && this._eventListener(event);\n  //   });\n\n  //   mc.on('pinchstart', (event) => {\n  //     lastScale = 1;\n  //     this._eventListener && this._eventListener(event);\n  //   });\n\n  //   mc.on('pinchmove', (event) => {\n  //     if (!pressed) {\n  //       let chart = this.getCurrentChart();\n  //       let result = chart && chart.pinchMove(lastScale - event.scale);\n  //       result && (lastScale = event.scale);\n  //     }\n  //     this._eventListener && this._eventListener(event);\n  //   });\n  // }\n\n  /**\n   * 显示和隐藏mask层\n   */\n  toggleMask(show) {\n    // // 如果mask不存在则创建\n    // let mask = this._mask;\n    // if (!mask) {\n    //   mask = this._mask = document.createElement('div');\n    //   mask.class = 'load-mask';\n    //   let style = mask.style;\n    //   style.position = 'absolute';\n    //   style.top = style.left = style.right = style.bottom = 0;\n    //   style.zIndex = 100;\n    //   style.backgroundColor = 'rgba(255,255,255,0.5)';\n    //   this.container.appendChild(mask);\n    //   if ('|absolute|relative|fix'.indexOf(this.container.style.position) <= 0) {\n    //     this.container.style.position = 'relative';\n    //   }\n\n    //   let label = document.createElement('div');\n    //   let labelStyle = label.style;\n    //   labelStyle.position = 'absolute';\n    //   labelStyle.marginLeft = '-60px';\n    //   labelStyle.top = '30%';\n    //   labelStyle.left = '50%';\n    //   labelStyle.fontSize = '14px';\n    //   labelStyle.textAlign = 'center';\n    //   labelStyle.padding = '4px 8px';\n    //   labelStyle.border = '1px solid #333';\n    //   labelStyle.color = '#333';\n    //   label.innerHTML = '加载数据中,请稍后';\n\n    //   mask.appendChild(label);\n    // }\n    // mask.style.display = (show ? 'block' : 'none');\n  }\n\n  drawLine(x1, y1, x2, y2, lineWidth, style) {\n    const ctx = this.ctx;\n    ctx.beginPath();\n    // ctx.lineWidth = lineWidth;\n    ctx.setLineWidth(lineWidth * this.pixelRadio);\n    // ctx.strokeStyle = style;\n    ctx.setStrokeStyle(style);\n    ctx.moveTo(this.normalizeDrawLinePoint(x1), this.normalizeDrawLinePoint(y1));\n    ctx.lineTo(this.normalizeDrawLinePoint(x2), this.normalizeDrawLinePoint(y2));\n    ctx.stroke();\n  }\n\n  //绘制虚线\n  drawLineDash(x1, y1, x2, y2, lineWidth, style) {\n    const ctx = this.ctx;\n    ctx.setStrokeStyle(style);\n    let step = 10\n    const x = x2 - x1,\n      y = y2 - y1,\n      count = Math.floor(Math.sqrt(x * x + y * y) / step),\n      xv = x / count,\n      yv = y / count;\n    ctx.beginPath();\n    for (let i = 0; i < count; i ++) {\n      if (i % 2 === 0) {\n        ctx.moveTo(x1, y1);\n      } else {\n        ctx.lineTo(x1, y1);\n      }\n      x1 += xv;\n      y1 += yv;\n    }\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n  }\n\n  drawText(text, pointX, pointY, fontSize, fontStyle, backgroundStyle = null) {\n    const ctx = this.ctx;\n    const textWidth = this.measureText(text);\n    const x = Math.min(Math.max(pointX, 0), this.canvasWidth - textWidth);\n    const y = pointY;\n    if (backgroundStyle) {\n      // 背景边框\n      // ctx.fillStyle = backgroundStyle;\n      ctx.setFillStyle(backgroundStyle);\n      // ctx.fillRect(x - 2, y + 2, textWidth + 4, -(fontSize + 4));\n      ctx.rect(x - 2, y + 2, textWidth + 4, -(fontSize + 4));\n      ctx.fill();\n    }\n\n    ctx.beginPath();\n    // ctx.font = `${fontSize}px Arial`;\n    ctx.setFontSize(fontSize);\n    // ctx.fillStyle = fontStyle;\n    ctx.setFillStyle(fontStyle);\n    ctx.fillText(text, x, y);\n  }\n\n  fillPath(points, y0, strokeColor, fillStyle, lineWidth = 1) {\n    const ctx = this.ctx;\n    ctx.beginPath();\n    points.forEach((eachPoint, index) => {\n      if (index === 0) {\n        ctx.moveTo(eachPoint[0], eachPoint[1]);\n      } else {\n        ctx.lineTo(eachPoint[0], eachPoint[1]);\n      }\n    });\n    // ctx.lineWidth = lineWidth;\n    ctx.setLineWidth(lineWidth * this.pixelRadio);\n    // ctx.strokeStyle = strokeColor;\n    ctx.setStrokeStyle(strokeColor);\n    // ctx.lineJoin = 'round';\n    ctx.setLineJoin('round');\n    ctx.stroke();\n\n    if (points.length > 1) {\n      // ctx.lineWidth = 0;\n      ctx.setLineWidth(0);\n      ctx.lineTo(points[points.length - 1][0], y0);\n      ctx.lineTo(points[0][0], y0);\n      ctx.closePath();\n      // ctx.fillStyle = fillStyle;\n      ctx.setFillStyle(fillStyle);\n      ctx.fill();\n    } else {\n      ctx.closePath();\n    }\n  }\n\n  drawPath(points, color, lineWidth = 1) {\n    const ctx = this.ctx;\n    ctx.beginPath();\n    // ctx.lineJoin = 'round';\n    ctx.setLineJoin('round');\n    // ctx.lineWidth = lineWidth;\n    ctx.setLineWidth(lineWidth * this.pixelRadio);\n    // const strokeStyle = ctx.strokeStyle = color = color.toLowerCase();\n    ctx.setStrokeStyle(color);\n    points.forEach((eachPoint, index) => {\n      // strokeStyle = eachPoint[2] === false ? 'transparent' : color;\n      // if (ctx.strokeStyle !== strokeStyle) {\n      //   ctx.stroke();\n      //   ctx.closePath();\n      //   ctx.beginPath();\n      //   ctx.strokeStyle = strokeStyle;\n      // }\n      if (index === 0) {\n        ctx.moveTo(eachPoint[0], eachPoint[1]);\n      } else {\n        ctx.lineTo(eachPoint[0], eachPoint[1]);\n      }\n    });\n\n    ctx.stroke();\n    ctx.closePath();\n    //console.log(\"ctx get line dash\",ctx.getLineDash())\n  }\n\n  drawRect(x, y, width, height, fillStyle) {\n    //width-=3;\n    const ctx = this.ctx;\n    // ctx.fillStyle = fillStyle;\n    if (x && y && width && height) {\n      ctx.beginPath();\n      //ctx.globalAlpha=1;\n      ctx.setFillStyle(fillStyle);\n      ctx.rect(x, y, width, height);\n      ctx.fill();\n      ctx.closePath();\n    }\n  }\n\n  //绘制矩形图\n  drawRectEmpty(x, y, width, height,fillStyle){\n    //console.log(\"debug \",x, y, width, height)\n    width-=3;\n    const ctx = this.ctx;\n    ctx.beginPath();\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = fillStyle;\n    //ctx.strokeRect(x, y, width, height);\n    ctx.moveTo(x,y);\n    ctx.lineTo(x,y+height);\n    ctx.lineTo(x+width,y+height);\n    ctx.lineTo(x+width,y);\n    ctx.lineTo(x,y);\n    ctx.stroke();\n\n    ctx.closePath();\n  }\n\n  drawCircle(x, y, radius, fillStyle, lineWidth = 0, strokeStyle) {\n    const ctx = this.ctx;\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\n    ctx.closePath();\n    // ctx.fillStyle = fillStyle;\n    ctx.setFillStyle(fillStyle);\n    // ctx.lineWidth = lineWidth;\n    ctx.setLineWidth(lineWidth * this.pixelRadio);\n    // ctx.strokeStyle = strokeStyle;\n    ctx.setStrokeStyle(strokeStyle);\n    ctx.fill();\n  }\n\n  normalizeDrawLinePoint(point) {\n    if (this.pixelRadio === 1) {\n      const intPoint = parseInt(point, 10);\n      return intPoint > point ? intPoint - 0.5 : intPoint + 0.5;\n    }\n    return point;\n  }\n\n  /* eslint class-methods-use-this: 0 */\n  measureText(text) {\n    // return this.ctx.measureText(text).width;\n    // 计算text的半角长度后乘以每个半角字符的宽度\n    return text.replace(/[\\u0391-\\uFFE5]/g, 'aa').length * 5 * this.pixelRadio;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/Canvas.js","/**\n * Created by jiagang on 16/2/18.\n */\nimport { Dzhyun, noop } from '@/utils/util.js'\nimport store from '@/store/index.js'\n\nconst oneMinute = 1 * 60 * 1000;\nconst oneDay = 1 * 24 * 60 * oneMinute;\n\n// 默认股票交易时间\nconst defaultTimeInfo = (function () {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = (`0${(now.getMonth() + 1)}`).slice(-2);\n  const day = (`0${now.getDate()}`).slice(-2);\n  const date = [year, month, day].join('');\n  return {\n    RiQi: date,\n    JiaoYiShiJianDuan: [\n      {\n        KaiShiShiJian: '0930',\n        JieShuShiJian: '1130',\n        KaiShiRiQi: date,\n        JieShuRiQi: date,\n      },\n      {\n        KaiShiShiJian: '1300',\n        JieShuShiJian: '1500',\n        KaiShiRiQi: date,\n        JieShuRiQi: date,\n      },\n    ],\n    JiHeJingJiaDianShu: 15,\n    ShiQu: 8,\n    ZuoShou: 0,\n  };\n}());\n\n//将2018-05-30 09:30 这种转成 uinx毫秒时间戳\nconst getTime = function (dateParam, hourMinute, timeZone) {\n  const date = JSON.stringify(dateParam);\n  const year = parseInt(date.substr(0, 4), 10);\n  const month = parseInt(date.substr(4, 2), 10) - 1;\n  const day = parseInt(date.substr(6, 2), 10);\n  const hour = parseInt(hourMinute / 100, 10) - timeZone;\n  const minute = hourMinute % 100;\n  return Date.UTC(year, month, day, hour, minute);\n};\n\nexport default class DataProvider {\n//K线-K线服务\n  /*\n  klineDataStore = new DataStore({\n    serviceUrl: '/quote/kline',\n    idProperty: ' ',\n  });*/\n  klineDataStore = store.state.wsobj;\n\n//指标-分笔行情\n/*\n  maDataStore = new DataStore({\n    serviceUrl: '/indicator/calc',\n    idProperty: ' ',\n    otherParams: {\n      name: 'MA',\n      text: 'MA1:MA(CLOSE,P1);MA2:MA(CLOSE,P2);MA3:MA(CLOSE,P3);MA4:MA(CLOSE,P4);',\n      parameter: 'P1=5,P2=10,P3=30,P4=60',\n    },\n  });*/\n  maDataStore = store.state.wsobj;\n\n//分时走势\n/*\n  minDataStore = new DataStore({\n    serviceUrl: '/quote/min',\n    idProperty: ' ',\n  });*/\n  minDataStore = store.state.wsobj;\n\n  constructor(params) {\n    this.params = params;\n    //this.klineDataStore.dataParser.direct = true;\n    //this.maDataStore.dataParser.direct = true;\n    //this.minDataStore.dataParser.direct = true;\n  }\n\n  getKline(params, withMA = true) {\n    const klineQuery = this.klineDataStore.query('/quote/kline',\n      Object.assign({}, this.params, params)).then(data => data[0] && data[0].Data);\n    return [klineQuery, withMA && this.getMA(params)];\n  }\n\n  subscribeKline(params, callback = noop) {\n    const request = this.klineDataStore.subscribe('/quote/kline',\n      Object.assign({}, this.params, { start: -1 }, params),\n      (data) => {\n        console.log('kline',params,data);\n\n        if (!(data instanceof Error)) {\n          const kline = data[0] && data[0].Data;\n          callback(kline);\n\n          this.getMA(Object.assign({}, { start: -1 }, params)).then((ma) => {\n            if (kline && ma && kline[0] && ma[0] && kline[0].ShiJian === ma[0].ShiJian) {\n              const maResult = ma[0].JieGuo;\n              Object.assign(kline[0], {\n                MA5: maResult[0],\n                MA10: maResult[1],\n                MA20: maResult[2],\n                MA30: maResult[3],\n              });\n            }\n            callback(kline);\n          });\n        }\n      });\n    request.cancel = () => {\n      this.klineDataStore.cancel(request.qid);\n    };\n    return request;\n  }\n\n  getMA(params) {\n    let _params ={name: 'MA',\n                  text: 'MA1:MA(CLOSE,P1);MA2:MA(CLOSE,P2);MA3:MA(CLOSE,P3);MA4:MA(CLOSE,P4);',\n                  parameter: 'P1=5,P2=10,P3=30,P4=60'};\n\n    return this.maDataStore.query('/indicator/calc',Object.assign({}, this.params, params, _params))\n    .then(data => data[0] && data[0].ShuJu)\n    .catch(() => []);\n  }\n\n  _initMinCache(timeInfo) {\n    const times = timeInfo.JiaoYiShiJianDuan;\n    const timeZone = timeInfo.ShiQu;\n    this.minCache = {\n      lastClose: timeInfo.ZuoShou,\n    };\n    const minTimes = this.minCache.minTimes = [];\n    if (times && times.length > 0) {\n      let lastTime = 0;\n      let startTime;\n      let endTime;\n\n      times.forEach((eachTime, index) => {\n        startTime = getTime(eachTime.KaiShiRiQi, eachTime.KaiShiShiJian, timeZone);\n        endTime = getTime(eachTime.JieShuRiQi, eachTime.JieShuShiJian, timeZone);\n\n        // 跨天\n        if (endTime < startTime) {\n          endTime += oneDay;\n        }\n        if (startTime < lastTime) {\n          startTime += oneDay;\n          endTime += oneDay;\n        }\n\n        // 跳过除第一段时间的开始时间\n        if (index > 0) {\n          startTime += oneMinute;\n        }\n        while (startTime <= endTime) {\n          minTimes.push(startTime);\n          startTime += oneMinute;\n        }\n        lastTime = endTime;\n      });\n\n      // FIXME 默认包含集合进价的数据\n      const prefixMinute =  0;\n      startTime = minTimes[0];\n\n      for (let i = 1; i <= prefixMinute; i += 1) {\n        minTimes.unshift(startTime - (i * oneMinute));\n      }\n    }\n  }\n\n  _updateMinCache(time, data) {\n    const minTimes = this.minCache.minTimes || [];\n    let index = this.minCache.minTimes.indexOf(time);\n    if (index >= 0) {\n      this.minCache[time] = data;\n    } else {\n      // 没有对应时间时，认为交易日期有跨越，对应修正交易时间数据\n      const firstTime = minTimes[0];\n      const overDays = parseInt((time - firstTime) / oneDay, 10);\n      const overTime = overDays * oneDay;\n      index = minTimes.indexOf(time - overTime);\n\n      // 找到跨越时间点将之后的数据统一修改日期到数据对应的日期\n      if (index >= 0) {\n        while (index < minTimes.length) {\n          let oldTime = minTimes[index];\n          oldTime += overTime;\n          minTimes[index] = oldTime;\n          index += 1;\n        }\n        this.minCache[time] = data;\n      }\n    }\n  }\n\n  //本地存储\n  saveDataLocal(minData,ckey,callback){\n    if(!this.minCache || this.minCache === undefined){\n      this._initMinCache(minData.JiaoYiShiJianDuan ? minData : defaultTimeInfo);\n    }\n    minData = minData.Data;\n    if (minData && minData.length > 0) {\n      minData.forEach((eachData) => {\n        const time = eachData.ShiJian * 1000;\n        this._updateMinCache(time, eachData);\n      });\n    }\n    //console.log('minCache',this.minCache);\n    callback(this.minCache);\n    let temp = this.minCache ;\n    this.minCache = null;\n    wx.setStorage({\n      key: ckey,\n      data: temp,\n      success: () => {\n\n      },\n      fail: () => {\n\n      },\n    });\n  }\n\n  /* eslint no-underscore-dangle: 0 */\n  subscribeMin(callback = noop) {\n    this.minCache = null;\n\n    const request = this.minDataStore.subscribe('/quote/min', this.params, (data) => {\n            console.log('subscribeMin',data);\n            if (data && !(data instanceof Error) && data.length > 0) {\n              let minData = data[0];\n\n              // 清盘\n              if (minData.QingPan === 1) {\n                this.minCache = null;\n                callback(this.minCache);\n                return ;\n              }\n\n              let ckey = \"stock-min\";\n              let that =this\n\n                wx.getStorage({\n                  key: ckey,\n                  success: result => {\n                    that.minCache = result.data;\n                    that.saveDataLocal(minData,ckey,callback)\n                  },\n                  fail: () => {\n                    that.saveDataLocal(minData,ckey,callback)\n\n                  },\n                });\n                //console.log(\"minCache getSync is \",this.minCache)\n            }\n          });\n    request.cancel = () => {\n      this.minDataStore.cancel(request.qid);\n    };\n    return request;\n  }\n\n  cancel() {\n    this.klineDataStore.cancel();\n    this.maDataStore.cancel();\n    this.minDataStore.cancel();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/DataProvider.js","import Chart from '@/charts/Chart.js';\n\nexport default class KlineChart extends Chart {\n\n  initData() {\n    super.initData();\n\n    // 初始化数据,取options中data字段作为初始数据\n    this.data = this.options.data || [];\n    this.cache = [].concat(this.data);\n\n    this.period = this.options.period || '1day';\n    this.split = this.options.split != null ? this.options.split : 1;\n\n    // 最大显示条数(理论数值,不能大于重画时计算出的最大条数)\n    this.maxCount = this.options.maxCount || Number.MAX_VALUE;\n\n    // 最小显示条数\n    this.minCount = this.options.minCount || 10;\n\n    // 最大预加载数据条数,默认200,预加载数据条数取当前显示条数和最大预加载数据条数中较小的一个值\n    this.maxPreLoadCount = this.options.maxPreLoadCount || 300;\n\n    // 位置表示显示数据在缓存中开始位置\n    this.position = 0;\n\n    this.hasMoreData = true;\n\n    // 初始需要展示的数据条数,默认80\n    this.reCalculate(0, this.options.initCount || 80);\n\n    // 订阅K线数据变化(更新最新的1条数据)\n    const subscribe = this.dataProvider.subscribeKline({\n      period: this.period,\n      split: this.split,\n    }, (data) => {\n      // chart 移除则停止订阅\n      if (!this.canvas.hasChart(this)) {\n        subscribe.cancel();\n        return;\n      }\n\n      if (data && data.length > 0) {\n        if (this.cache.length > 0) {\n          this.cache[this.cache.length - 1] = data[0];\n        }\n        this.reCalculate();\n      }\n    });\n  }\n\n  redraw() {\n    if (this.data) {\n      super.redraw();\n    }\n  }\n\n  initChart() {\n    super.initChart();\n\n    // 根据画板宽度调整显示数据个数,最多1像数显示一条数据(单条数据小于1像数时,需要调整显示个数),间隙和影线宽度都是固定的1像数\n    let count = this.data.length;\n\n    // FIXME count = 0\n    let pixelPerWithSeparator = this.canvas.canvasWidth / count;\n\n    let pixelPer = Math.max(pixelPerWithSeparator - 1, 0.5);\n    if (pixelPerWithSeparator < 1) {\n      pixelPerWithSeparator = 1;\n      count = this.canvas.canvasWidth;\n      this.data = this.data.slice(0, count);\n      this.maxCount = count;\n    } else if (pixelPer > 50) {\n      // 超过最大值50,则取最大值\n      pixelPer = 50;\n    }\n\n    this.pixelPer = pixelPer;\n    this.pixelPerWithSeparator = pixelPerWithSeparator;\n\n    // 计算最大和最小值\n    const MAX_VALUE = Number.MAX_VALUE;\n    const MIN_VALUE = Number.MIN_VALUE;\n    let min = MAX_VALUE;\n    let max = 0;\n    let maxVolume = 0;\n    this.data.forEach((eachData) => {\n      max = Math.max(max, eachData.ZuiGaoJia || MIN_VALUE, eachData.MA5 || MIN_VALUE,\n        eachData.MA10 || MIN_VALUE, eachData.MA20 || MIN_VALUE, eachData.MA30 || MIN_VALUE);\n      min = Math.min(min, eachData.ZuiDiJia || MAX_VALUE, eachData.MA5 || MAX_VALUE,\n        eachData.MA10 || MAX_VALUE, eachData.MA20 || MAX_VALUE, eachData.MA30 || MAX_VALUE);\n      maxVolume = Math.max(maxVolume, eachData.ChengJiaoLiang);\n    });\n\n    // 最大值和最小值范围增加10%\n    this.max = max > min ? max + ((max - min) * 0.1) : max * 1.1;\n    this.min = max > min ? min - ((max - min) * 0.1) : max * 0.9;\n    this.maxVolume = maxVolume;\n\n    this.candleChartHeight = this.mainChartHeight;\n    this.candleYPixelRadio = this.candleChartHeight / (this.max - this.min);\n    this.volumeYPixelRadio = this.volumeChartHeight / maxVolume;\n  }\n\n  formatXAxisLabel(text, hasDay = false) {\n    const date = new Date(text);\n    return hasDay ? Chart.formatDate(date, 'yyyyMMdd') : Chart.formatDate(date, 'yyyy-MM');\n  }\n\n  /* eslint class-methods-use-this: 0 */\n  isUp(open, close, lastClose) {\n    // FIXME 还需要考虑当天收盘和昨收相同的情况\n    return open !== close ? close > open : close > lastClose;\n  }\n\n  drawChart() {\n    const maPoints = [[], [], [], []];\n    const color = ['#222222', '#e78512', '#2e8ae6', '#cc2996'];\n    const pixelPerWithSeparator = this.pixelPerWithSeparator;\n    const pixelPer = this.pixelPer;\n    const halfPixelPer = pixelPer / 2;\n    const hasVolume = this.hasVolume;\n    const candleYPixelRadio = this.candleYPixelRadio;\n    const max = this.max;\n    const canvas = this.canvas;\n    let lastLabel;\n\n    let lastDrawIndex = 0;\n\n    // 画出每根k线和量\n    /* eslint no-param-reassign: 0 */\n\n\n    let timeArr = [];\n    this.data.forEach((eachData, index) => {\n      let lastClose = eachData.lastClose;\n\n      // 添加数据附加属性\n      if (!lastClose) {\n        lastClose = eachData.lastClose = index > 0 ? this.data[index - 1].ShouPanJia : 0;\n        eachData.time = eachData.ShiJian * 1000;\n        eachData.isUp = this.isUp(eachData.KaiPanJia, eachData.ShouPanJia, lastClose);\n        eachData.xAxisLabel = this.formatXAxisLabel(eachData.time,true);\n      }\n\n      timeArr.push(eachData.xAxisLabel)\n\n      //console.log(\"label is \",currentLabel)\n\n      // 满足条件画x轴坐标(跨月的第一交易日并且两个坐标点之间的距离不小于指定大小)\n/*      if (currentLabel !== lastLabel) {\n        lastLabel = currentLabel;\n        if ((index - lastDrawIndex) * pixelPerWithSeparator > pix) {\n           // -30 修复时间轴最右侧日期显示一半的问题\n          this.drawXAxisGridLine((pixelPerWithSeparator * index) + halfPixelPer-30, currentLabel);\n          lastDrawIndex = index;\n        }\n      }*/\n\n      this.drawCandle(index, eachData.KaiPanJia, eachData.ShouPanJia, eachData.ZuiGaoJia,\n        eachData.ZuiDiJia, eachData.isUp);\n      if (hasVolume) {\n        this.drawVolume(index, eachData.ChengJiaoLiang, eachData.isUp);\n      }\n\n      // MA\n      if (eachData.MA5) {\n        let x = (pixelPerWithSeparator * index) + halfPixelPer;\n        if (index === 0) {\n          x -= halfPixelPer;\n        } else if (index === this.data.length - 1) {\n          x += halfPixelPer;\n        }\n        maPoints[0].push([x, candleYPixelRadio * (max - eachData.MA5)]);\n        maPoints[1].push([x, candleYPixelRadio * (max - eachData.MA10)]);\n        maPoints[2].push([x, candleYPixelRadio * (max - eachData.MA20)]);\n        maPoints[3].push([x, candleYPixelRadio * (max - eachData.MA30)]);\n      }\n    });\n\n    let pix = this.canvas.canvasWidth/2;\n\n    for(let i =0 ;i<3;i++){\n      if(i ==0){\n        this.drawXAxisGridLine(i * pix + 21 * this.canvas.pixelRadio, timeArr[0], '#dddddd');\n      }else if(i==1){\n        this.drawXAxisGridLine(i * pix, timeArr[Math.round(timeArr.length/2)], '#dddddd','middle');\n      }else if(i==2){\n        this.drawXAxisGridLine(i * pix-29 * this.canvas.pixelRadio, timeArr[timeArr.length-1], '#dddddd');\n      }\n    }\n    timeArr = null;\n\n\n    maPoints.forEach((eachPoints, index) => {\n      canvas.drawPath(eachPoints, color[index]);\n    });\n\n    // 按压时显示十字光标\n    if (this.pressPoint) {\n      const { x, y } = this.pressPoint;\n      const index = parseInt(x / pixelPerWithSeparator, 10);\n      const data = this.data[index] || {};\n\n      // x\n      this.drawXAxisGridLine((pixelPerWithSeparator * index) + (pixelPerWithSeparator / 2),\n        this.formatXAxisLabel(data.time, true), this.pointerLineColor, undefined, true, true);\n\n      // y\n      if (y < this.candleChartHeight && y > 0) {\n        this.drawYAxisGridLine(y, this.max - (y / this.candleYPixelRadio), this.pointerLineColor,\n          (y > this.candleChartHeight / 2) ? 'top' : 'bottom', true);\n      }\n\n      // 显示详细信息\n      this.drawTooltip(data);\n    }\n  }\n\n  //k线时间轴显示和竖线\n  drawXAxisGridLine(x, text, color = this.gridLineColor, position = 'middle', withBackground = false, full = false, tickColor = this.tickColor) {\n    //不显示竖线\n    //this.canvas.drawLine(x, 0, x, full ? this.canvas.canvasHeight : this.mainChartHeight, this.gridLineWidth, color);\n    if (text) {\n      const textWidth = this.canvas.measureText(text);\n      const fontSize = this.fontSize;\n      const textX = position === 'middle' ? x - (textWidth / 2) : x;\n      const textY = this.mainChartHeight + fontSize + 2;\n\n      this.canvas.drawText(text, textX, textY, fontSize, tickColor,\n        withBackground && this.tickBackgroundColor);\n    }\n  }\n\n  drawTooltip(data) {\n    let startX = 50;\n    const fontSize = this.fontSize;\n    const y = fontSize + 2;\n    const color = this.getColor(this.isUp(data.KaiPanJia, data.ShouPanJia, data.lastClose));\n\n    [\n      { label: `日期:${this.formatXAxisLabel(data.time, true)}`, labelColor: '#555555' },\n      { label: `开:${Chart.formatNumber(data.KaiPanJia, 2)}` },\n      { label: `收:${Chart.formatNumber(data.ShouPanJia, 2)}` },\n      { label: `高:${Chart.formatNumber(data.ZuiGaoJia, 2)}` },\n      { label: `低:${Chart.formatNumber(data.ZuiDiJia, 2)}` },\n      { label: `涨跌:${Chart.formatNumber((data.ShouPanJia - data.lastClose) / data.lastClose, 2, '%')}`, labelColor: this.getColor(data.ShouPanJia >= data.lastClose) },\n      { label: `量:${Chart.formatNumber(data.ChengJiaoLiang, 2, 'K/M')}` },\n    ].forEach(({ label, labelColor = color }) => {\n      this.canvas.drawText(label, startX, y, fontSize, labelColor);\n      startX += (this.canvas.measureText(label) + 10);\n    });\n  }\n\n  drawBackground() {\n    // 画出纵坐标和网格线\n    const max = this.max;\n    const min = this.min;\n    this.drawYAxisGridLine(0, max, undefined, 'bottom');\n    this.drawYAxisGridLine(this.candleChartHeight, min, undefined, 'bottom',undefined,undefined,12*this.canvas.pixelRadio);\n\n    this.drawYAxisGridLine(this.candleChartHeight / 2, max - ((max - min) / 2));\n    this.drawYAxisGridLine(this.candleChartHeight / 4, max - ((max - min) / 4));\n    this.drawYAxisGridLine(this.candleChartHeight * (3 / 4), max - ((max - min) * (3 / 4)));\n    this.drawYAxisGridLine(this.canvas.canvasHeight - this.volumeChartHeight, this.maxVolume, null, 'bottom');\n\n    //0坐标 不显示\n    //this.drawYAxisGridLine(this.canvas.canvasHeight, '0');\n\n  }\n\n  drawYAxisGridLine(y, text, color = this.gridLineColor, position = 'top', withBackground = false, tickColor = this.tickColor,textMove = 0) {\n\n      if(position == 'bottom'){\n        this.canvas.drawLine(0, y, this.canvas.canvasWidth, y, this.gridLineWidth, color);\n      }else{\n        this.canvas.drawLineDash(0, y, this.canvas.canvasWidth, y, this.gridLineWidth, color);\n      }\n\n    if (text) {\n        textMove >0 && (y-=textMove)\n      // 记录Y轴坐标位置\n      const yAxisTicks = this.yAxisTicks;\n      yAxisTicks.push({\n        text: this.formatYAxisLabel(text),\n        x:2*this.canvas.pixelRadio,\n        y: (position === 'top' ? y - 2 : y + this.fontSize + 2),\n        tickColor,\n        withBackground,\n      });\n    }\n  }\n\n  drawCandle(index, open, close, top, low, isUp) {\n    const width = this.pixelPer;\n    const x = ((this.pixelPerWithSeparator * index) + (this.pixelPerWithSeparator / 2)) -\n      (width / 2);\n    const y = this.candleYPixelRadio * (this.max - open);\n    let height = open === close ? 1 : (this.candleYPixelRadio * (this.max - close)) - y;\n    height = Math.abs(height) < 1 ? Math.sign(height) : height;\n    let color = this.getColor(isUp);\n\n    if (width > 1) {\n      if(isUp){\n        this.canvas.drawRectEmpty(x, y, width, height,color);\n      }else {\n        if(!isUp){\n          color = '#1ca049';\n        }\n        this.canvas.drawRect(x, y, width, height, color);\n      }\n\n    }\n\n    // 上下影线\n    const x1 = x + (width / 2) - 1;\n    const y1 = this.candleYPixelRadio * (this.max - top);\n    const y2 = this.candleYPixelRadio * (this.max - low);\n\n    this.canvas.drawLine(x1, y1, x1, y+height, 0.6, color);\n    this.canvas.drawLine(x1, y, x1, y2, 0.6, color);\n  }\n\n  drawVolume(index, volume, isUp) {\n    const width = this.pixelPer;\n    const x = ((this.pixelPerWithSeparator * index) + (this.pixelPerWithSeparator / 2)) -\n      (width / 2);\n    const y = this.canvas.canvasHeight;\n    const height = -this.volumeYPixelRadio * volume;\n    if(isUp){\n      this.canvas.drawRectEmpty(x, y, width, height,this.getColor(isUp));\n    }else{\n      this.canvas.drawRect(x, y, width, height, this.getColor(isUp));\n    }\n\n  }\n\n  reCalculate(move = 0, count) {\n    // 重新计算显示数据在缓存数据中的左偏移位置和长度\n    const cacheCount = this.cache.length;\n    let requestCount = 0;\n    let currentCount = this.data.length;\n    let leftPosition = this.position;\n\n    // 如果move为正数,表示向左移动,判断缓存数据是否存在,缓存数据不足则加载更多数据,负数表示向右移动直接从缓存中取得数据\n    if (move > 0) {\n      if (leftPosition < move) {\n        if (this.hasMoreData) {\n          requestCount = move - leftPosition;\n        } else {\n          leftPosition = 0;\n        }\n      } else {\n        leftPosition -= move;\n      }\n    } else if (move < 0) {\n      const restCount = cacheCount - leftPosition - currentCount;\n      if (restCount > -move) {\n        leftPosition += -move;\n      } else {\n        leftPosition += restCount;\n      }\n    }\n\n    // count 重设显示数据个数(先重新计算左偏移,再重设count)\n    // 限制最小个数\n    if (count) {\n      count = Math.max(count, this.minCount);\n    }\n\n    // 如果count比当前个数小,则直接左偏移向右移动count/2\n    if (count < currentCount) {\n      leftPosition += parseInt((currentCount - count) / 2, 10);\n      currentCount = count;\n    } else if (count > currentCount) {\n      // 限制显示的最大个数\n      count = Math.min(count, this.maxCount);\n      let leftOffsetCount = parseInt((count - currentCount) / 2, 10);\n\n      leftOffsetCount += Math.max(leftOffsetCount - (cacheCount - leftPosition - currentCount), 0);\n\n      // 如果缓存数据不足则加载更多数据\n      if (leftPosition < leftOffsetCount && this.hasMoreData) {\n        requestCount = leftOffsetCount - leftPosition;\n      } else {\n        leftPosition = Math.max(leftPosition - leftOffsetCount, 0);\n        currentCount = count;\n      }\n    }\n\n    // requestCount不为零则加载数据后再做reCalculate\n    if (requestCount > 0) {\n      // 计算请求数据的start和count,count需要加上预加载个数(默认等于当前显示的数据个数,但不能超过限制的最大值)\n      // 初始currentCount为0时,请求个数为初始显示个数的2倍\n      requestCount += Math.min(currentCount || requestCount, this.maxPreLoadCount);\n      const start = -(requestCount + cacheCount);\n      this.loadMoreData(start, requestCount).then(() => {\n        this.reCalculate(move, count);\n      });\n      return;\n    }\n\n    // 根据新的左偏移位置和新的数据个数重设显示数据data后重画图形\n    this.data = this.cache.slice(leftPosition, leftPosition + currentCount);\n    this.position = leftPosition;\n    this.redraw();\n  }\n\n  /**\n   * 动态加载数据,添加到缓存cache中并且修改当前位置\n   */\n  loadMoreData(start, count) {\n    this.loading = true;\n    this.canvas && this.canvas.toggleMask(true);\n    const lastDataProvider = this.dataProvider;\n\n    const [klinePromise, maPromise] = this.dataProvider.getKline({\n      period: this.period,\n      split: this.split,\n      start,\n      count,\n    });\n    return klinePromise.then((klineData) => {\n      if (klineData && lastDataProvider === this.dataProvider) {\n        // 合并数据到缓存中,判断是否还有更多数据(请求到的数据长度小于count大小或者请求到的数据的时间在cache中已经存在)\n        if (klineData.length < count) {\n          this.hasMoreData = false;\n        }\n        const cacheStartTime = this.cache[0] ? this.cache[0].ShiJian : Number.MAX_VALUE;\n        let eachData;\n        for (let i = klineData.length; i > 0; i -= 1) {\n          eachData = klineData[i - 1];\n          if (eachData.ShiJian < cacheStartTime) {\n            this.cache.unshift(eachData);\n            this.position += 1;\n          } else {\n            this.hasMoreData = false;\n            break;\n          }\n        }\n      }\n      this.loading = false;\n\n      // 再等待MA数据返回后更新缓存后重画chart\n      maPromise.then((maData) => {\n        // 合并K线和MA数据\n        if (maData) {\n          let maIndex = 0;\n          const maLength = maData.length;\n          klineData.forEach((eachKline) => {\n            const kTime = eachKline.ShiJian;\n            while (maIndex < maLength) {\n              const eachMA = maData[maIndex];\n              const maTime = eachMA.ShiJian;\n              const maResult = eachMA.JieGuo;\n              if (maTime > kTime) {\n                break;\n              } else if (maTime === kTime) {\n                Object.assign(eachKline, {\n                  MA5: maResult[0],\n                  MA10: maResult[1],\n                  MA20: maResult[2],\n                  MA30: maResult[3],\n                });\n              }\n              maIndex += 1;\n            }\n          });\n\n          this.redraw();\n        }\n      });\n    });\n  }\n\n  panMove(pressed, x, y, deltaX) {\n    if (!this.loading) {\n      if (pressed) {\n        this.pressPoint = { x, y };\n        this.redraw();\n      } else if (this.pressPoint) {\n        this.pressPoint = null;\n        this.redraw();\n      } else {\n        const size = parseInt(deltaX / (this.pixelPerWithSeparator), 10);\n        if (size !== 0) {\n          this.reCalculate(size);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  pinchMove(scale) {\n    if (!this.loading) {\n      const deltaX = this.canvas.canvasWidth * scale;\n      const offsetCount = parseInt(deltaX / (this.pixelPerWithSeparator), 10);\n      if (Math.abs(offsetCount) > 1) {\n        this.reCalculate(0, this.data.length + offsetCount);\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/KlineChart.js","import Chart from '@/charts/Chart.js';\n\nexport default class MinChart extends Chart {\n\n  initData() {\n    wx.removeStorage({\n      key: \"stock-min\",\n      success: () => {\n\n      },\n      fail: () => {\n      },\n    });\n\n    super.initData();\n\n    this.cache = null;\n\n    this.canvas && this.canvas.toggleMask(true);\n\n    // 订阅数据,有数据推送到达时重画\n    const subscribe = this.dataProvider.subscribeMin((data) => {\n      //console.log(\"data is \",data)\n      // chart 移除则停止订阅\n      if (!this.canvas.hasChart(this)) {\n        subscribe.cancel();\n        return;\n      }\n      this.cache = data;\n      this.redraw();\n    });\n  }\n\n  initChart() {\n    super.initChart();\n    // 是否显示均价, 默认true\n    this.hasAvgPrice = this.options.hasAvgPrice !== false;\n\n    const lastClose = this.cache.lastClose;\n\n    // 计算最大和最小值\n    const MAX_VALUE = Number.MAX_VALUE;\n    const MIN_VALUE = Number.MIN_VALUE;\n    let min = MAX_VALUE;\n    let max = 0;\n    let maxVolume = 0;\n    if (lastClose) {\n      // 昨收价存在,取距离昨收价最大偏移量作为最大绝对值\n      let maxOffset = 0;\n      let eachData;\n      Object.keys(this.cache).forEach((key) => {\n        eachData = this.cache[key];\n        if (eachData && eachData.ChengJiaoJia) {\n          maxOffset = Math.max(maxOffset, Math.abs(eachData.ChengJiaoJia - lastClose));\n          maxVolume = Math.max(maxVolume, eachData.ChengJiaoLiang);\n        }\n      });\n      max = lastClose + maxOffset;\n      min = lastClose - maxOffset;\n    } else {\n      // 昨收价不存在时\n      let eachData;\n      Object.keys(this.cache).forEach((key) => {\n        eachData = this.cache[key];\n        if (eachData && eachData.ChengJiaoJia) {\n          max = Math.max(max, eachData.ChengJiaoJia || MIN_VALUE);\n          min = Math.min(min, eachData.ChengJiaoJia || MAX_VALUE);\n          maxVolume = Math.max(maxVolume, eachData.ChengJiaoLiang);\n        }\n      });\n    }\n\n    // 最大值和最小值范围增加10%\n    this.max = max > min ? max + ((max - min) * 0.1) : max * 1.1;\n    this.min = max > min ? min - ((max - min) * 0.1) : max * 0.9;\n    this.maxVolume = maxVolume;\n\n    this.minChartHeight = this.mainChartHeight;\n    this.minYPixelRadio = this.minChartHeight / (this.max - this.min);\n    this.volumeYPixelRadio = this.volumeChartHeight / maxVolume;\n    this.pixelPer = (this.canvas.canvasWidth / this.cache.minTimes.length);\n  }\n\n  /* eslint class-methods-use-this: 0 */\n  formatXAxisLabel(text, hasDate = false) {\n    const date = new Date(text);\n    return hasDate ? Chart.formatDate(date, 'yyyy-MM-dd hh:mm') : Chart.formatDate(date, 'hh:mm');\n  }\n\n  redraw() {\n    if (this.cache) {\n      super.redraw();\n    }\n    this.cache = null\n  }\n\n  dateArr = [\"09:30\",\"10:30\",\"11:30\",\"14:00\",\"15:00\"];\n\n  drawChart() {\n    const minTimes = this.cache.minTimes;\n    const pixelPer = this.pixelPer;\n    const pricePoints = [];\n    const avgPricePoints = [];\n    const hasAvgPrice = this.hasAvgPrice;\n    let lastPrice = this.cache.lastClose;\n\n    let timeArr = [];\n    minTimes.forEach((time, index) => {\n      //console.log(\"time is \",time)\n      const minData = this.cache[time];\n      if (minData) {\n        const isUp = minData.isUp = minData.ChengJiaoJia >= lastPrice;\n        const x1 = pixelPer * index;\n        const x2 = x1 + (pixelPer / 2);\n        minData.ChengJiaoJia && pricePoints.push([\n          x2, (this.max - minData.ChengJiaoJia) * this.minYPixelRadio]);\n        hasAvgPrice && minData.JunJia && avgPricePoints.push([\n          x2,\n          (this.max - minData.JunJia) * this.minYPixelRadio,\n          (!(minData.JunJia > this.max || minData.JunJia < this.min)),\n        ]);\n        this.hasVolume && this.drawVolume(index, minData.ChengJiaoLiang, isUp);\n        lastPrice = minData.ChengJiaoJia;\n      }\n\n      let timeFormat = this.formatXAxisLabel(minTimes[index])\n      timeArr.push(timeFormat)\n\n\n      //console.log(\"pix is \",pix,\"------\",pixelPer,\"typeof \",typeof pix);\n/*      if (tickIndex && (tickIndex - lastTickIndex) * pixelPer > 50) {\n\n        //A股单独计算时间坐标网格\n        if(this.options.IsAstock != undefined && this.options.IsAstock){\n          let pix = this.canvas.canvasWidth/4;\n          if(this.dateArr.indexOf(timeFormat) != -1){\n             this.drawXAxisGridLine(((tickIndex-15)/60) * pix, timeFormat, '#dddddd');\n          }\n        }else{\n          this.drawXAxisGridLine((pixelPer * tickIndex) + (pixelPer / 2), timeFormat, '#dddddd');\n        }\n        lastTickIndex = tickIndex;\n      }*/\n\n\n    });\n\n\n    let pix = this.canvas.canvasWidth/4;\n\n    for(let i =0 ;i<5;i++){\n      if(i ==0){\n\n        if(typeof this.options.stock != undefined){\n            let stock2bit =  this.options.stock.substr(0,2)\n            if((stock2bit == 'SH' || stock2bit =='SZ') && timeArr[0] < '09:30'){\n                timeArr[0]  =  '09:30'\n            }\n        }\n        this.drawXAxisGridLine(i * pix, timeArr[0], '#dddddd','first');\n      }else if(i==2){\n        this.drawXAxisGridLine(i * pix, timeArr[Math.round(timeArr.length/2)], '#dddddd','middle');\n      }else if(i==4){\n        this.drawXAxisGridLine(i * pix, timeArr[timeArr.length-1], '#dddddd','end');\n      }else{\n        this.drawXAxisGridLine(i * pix, false, '#dddddd');\n      }\n    }\n    timeArr = null;\n\n    this.canvas.fillPath(pricePoints, this.minChartHeight, '#3e6ac5', 'rgba(230,239,254, 0.8)',1);\n    hasAvgPrice && this.canvas.drawPath(avgPricePoints, '#EB5F15');\n\n\n    // 按压时显示十字光标\n    if (this.pressPoint) {\n      let { x, y } = this.pressPoint;\n      const index = parseInt(x / (pixelPer), 10);\n      const minTime = minTimes[index];\n      const data = this.cache[minTime];\n      if (data) {\n        // x\n        x = ((pixelPer) * index) + (pixelPer / 2);\n        this.drawXAxisGridLine(x, this.formatXAxisLabel(minTime), this.pointerLineColor,\n          undefined, true, true);\n\n        // y\n        const price = data.ChengJiaoJia;\n        y = (this.max - price) * this.minYPixelRadio;\n        this.drawYAxisGridLine(y, price, this.pointerLineColor, (y > this.minChartHeight / 2) ? 'top' : 'bottom', true, this.getColor(data.ChengJiaoJia >= this.cache.lastClose));\n        this.canvas.drawCircle(x, y, 3, 'rgba(230, 100, 100, 0.8)');\n\n        // 显示详细信息\n        this.drawTooltip(data);\n      }\n    }\n  }\n\n\n  drawXAxisGridLine(x, text, color = this.gridLineColor, position = 'middle', withBackground = false, full = false, tickColor = this.tickColor) {\n    if(position == 'first')\n      this.canvas.drawLine(x, 0, x, full ? this.canvas.canvasHeight : this.mainChartHeight, this.gridLineWidth, color);\n    else\n      this.canvas.drawLineDash(x, 0, x, full ? this.canvas.canvasHeight : this.mainChartHeight, this.gridLineWidth, color);\n    if (text) {\n      const textWidth = this.canvas.measureText(text);\n      const fontSize = this.fontSize;\n      let textX\n      if(position === 'middle'){\n         textX = x - (textWidth / 2);\n      }else if(position == 'first'){\n        textX = x+2*this.canvas.pixelRadio\n      }else if(position == 'end'){\n        textX = x-28*this.canvas.pixelRadio\n      } else {\n         textX = x\n      }\n      const textY = this.mainChartHeight + fontSize + 2;\n\n      this.canvas.drawText(text, textX, textY, fontSize, tickColor,\n        withBackground && this.tickBackgroundColor);\n    }\n  }\n\n  drawVolume(index, volume, isUp) {\n    const x = this.pixelPer * index;\n    const y = this.canvas.canvasHeight;\n    const width = Math.max(0.5, this.pixelPer - 1);\n    const height = -this.volumeYPixelRadio * volume;\n\n    let color = isUp ? '#ee2c2c':'#1ca049';\n    this.canvas.drawRect(x, y, width, height, color);\n  }\n\n  drawTooltip(data) {\n    const fontSize = this.fontSize;\n    const y = fontSize + 2;\n    const lastClose = this.cache.lastClose;\n    let startX = 50;\n    [\n      { label: `时间:${this.formatXAxisLabel(data.ShiJian * 1000)}`, labelColor: '#555555' },\n      { label: `价格:${Chart.formatNumber(data.ChengJiaoJia, 2)}`, labelColor: '#0095D9' },\n      this.hasAvgPrice && (data.JunJia <= this.max && data.JunJia >= this.min) ? {\n        label: `均价:${Chart.formatNumber(data.JunJia, 2)}`,\n        labelColor: '#EB5F15',\n      } : undefined,\n      {\n        label: `涨跌:${Chart.formatNumber((data.ChengJiaoJia - lastClose) / lastClose, 2, '%')}`,\n        labelColor: this.getColor(data.ChengJiaoJia >= lastClose),\n      },\n      { label: `成交量:${Chart.formatNumber(data.ChengJiaoLiang, 2, 'K/M')}`, labelColor: this.getColor(data.isUp) },\n    ].forEach(({ label, labelColor } = {}) => {\n      if (label) {\n        this.canvas.drawText(label, startX, y, fontSize, labelColor);\n        startX += (this.canvas.measureText(label) + 10);\n      }\n    });\n  }\n\n  drawBackground() {\n    const lastClose = this.cache.ZuoShou;\n    const max = this.max;\n    const min = this.min;\n\n    // 画出纵坐标和网格线\n    this.drawYAxisGridLine(0, max, undefined, 'bottom', undefined, this.getColor(true));\n    this.drawYAxisGridLine(this.minChartHeight, min, undefined, 'bottom', undefined,\n      this.getColor(false),10*this.canvas.pixelRadio);\n\n    this.drawYAxisGridLine(this.minChartHeight / 2, lastClose || (max - ((max - min) / 2)),undefined,'bottom');\n    this.drawYAxisGridLine(this.minChartHeight / 4, max - ((max - min) / 4), undefined,\n      undefined, undefined, this.getColor(true));\n    this.drawYAxisGridLine(this.minChartHeight * (3 / 4), max - ((max - min) * (3 / 4)),\n      undefined, undefined, undefined, this.getColor(false));\n\n    //super.drawYAxisGridLine(this.canvas.canvasHeight, '0');\n    super.drawYAxisGridLine(this.canvas.canvasHeight - this.volumeChartHeight, this.maxVolume, null, 'bottom');\n  }\n\n  drawYAxisGridLine(y, text, color = this.gridLineColor, position = 'top', withBackground = false, tickColor = this.tickColor,textMove = 0) {\n    super.drawYAxisGridLine(y, text, color, position, withBackground, tickColor,textMove);\n\n    if (text) {\n      const yAxisTicks = this.yAxisTicks;\n      const rightText = Chart.formatNumber((text - this.cache.lastClose) / this.cache.lastClose, 2, '%', false);\n      if(textMove >0 )\n         y-=textMove\n      yAxisTicks.push({\n        text: rightText,\n        x: this.canvas.canvasWidth - this.canvas.measureText(rightText) - 5*this.canvas.pixelRadio,\n        y: (position === 'top' ? y - 2 : y + this.fontSize + 2),\n        tickColor,\n        withBackground,\n      });\n    }\n  }\n\n  panMove(pressed, x, y) {\n    if (pressed) {\n      this.pressPoint = { x, y };\n    } else {\n      this.pressPoint = null;\n    }\n    this.redraw();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/MinChart.js","import Vue from 'vue'\nimport App from './index'\n\nconst app = new Vue(App)\napp.$mount()\n\nexport default {\n  config: {\n    navigationBarTitleText: '大智慧行情'\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/stock/main.js","<template>\n<div>\n    <header class=\"header\" @tap=\"chkpankou\">\n        <div class=\"header-index\">\n            <span :class=\"FontClass\">{{dynaData.ZuiXinJia}}</span>\n            <p :class=\"FontClass\"><span>{{dynaData.ZhangDie}}</span><span>{{dynaData.ZhangFuTxt}}</span></p>\n        </div>\n        <div class=\"header-info\">\n            <p>最高：</p><p>{{dynaData.ZuiGaoJia}}</p>\n            <p>最低：</p><p>{{dynaData.ZuiDiJia}}</p>\n        </div>\n        <div class=\"header-info\">\n            <p>成交量：</p><p>{{dynaData.ChengJiaoLiang}}</p>\n            <p>成交额：</p><p>{{dynaData.ChengJiaoE}}</p>\n        </div>\n        <div class=\"header-info\" v-show=\"IsAstock\">\n            <p>总市值：</p><p>{{dynaData.ZongShiZhi}}</p>\n            <p>量比：</p><p>{{dynaData.LiangBi}}</p>\n        </div>\n        <span class=\"header-btn\" :class=\"{'up':pankou}\" >盘口</span>\n        <!--上涨指数-->\n        <div v-if=\"stocktype==1\" class=\"header-info-more\" v-show=\"pankou\" catchtouchmove=\"preventTouchMove\">\n            <div class=\"header-info-more-w\">\n                <ul class=\"more-block\">\n                    <li>涨停<span class=\"font-red\">{{dynaData.ZhangTing}}</span></li>\n                    <li>今开<span :class=\"FontClass\">{{dynaData.KaiPanJia}}</span></li>\n                    <li>振幅<span>{{dynaData.ZhenFu}}</span></li>\n                    <li>委比<span :class=\"{'font-red':dynaData.WeiBi>0,'font-green':dynaData.WeiBi<0,'font-gray':dynaData.WeiBi==0}\">{{dynaData.WeiBi}}</span></li>\n                    <li>总市值：<span>{{zsDynaData.ZongShiZhi}}</span></li>\n                </ul>\n                <ul class=\"more-block\">\n                    <li>跌停<span class=\"font-green\">{{dynaData.DieTing}}</span></li>\n                    <li>昨收<span>{{dynaData.ZuoShou}}</span></li>\n                    <li>现手<span>{{dynaData.XianShou}}</span></li>\n                    <li>量比<span :class=\"FontClass\">{{dynaData.LiangBi}}</span></p>\n                    <li>流通值<span>{{zsDynaData.LiuTongShiZhi}}</span></li>\n                </ul>\n            </div>\n        </div>\n        <!--上涨A股-->\n        <div v-else-if=\"stocktype==2\" class=\"header-info-more\" v-show=\"pankou\"  catchtouchmove=\"preventTouchMove\">\n            <div class=\"header-info-more-w\">\n                <ul class=\"more-block\">\n                    <li>涨停<span class=\"font-red\">{{dynaData.ZhangTing}}</span></li>\n                    <li>振幅<span>{{dynaData.ZhenFu}}</span></li>\n                    <li>委比<span :class=\"{'font-red':dynaData.WeiBi>0,'font-green':dynaData.WeiBi<0,'font-gray':dynaData.WeiBi==0}\">{{dynaData.WeiBi}}</span></li>\n                    <li>流通股<span>{{dynaData.LiuTongAGu}}</span></li>\n                    <li>总股本<span>{{dynaData.ZongGuBen}}</span></li>\n                    <li>市盈率(动)<span>{{dynaData.ShiYingLv}}</span></li>\n                    <li>市盈率(静)<span>{{dynaData.JingTaiShiYingLv}}</span></li>\n                </ul>\n                <ul class=\"more-block\">\n                    <li>跌停<span class=\"font-green\">{{dynaData.DieTing}}</span></li>\n                    <li>均价<span>{{dynaData.JunJia}}</span></li>\n                    <li>今开<span :class=\"FontClass\">{{dynaData.KaiPanJia}}</span></li>\n                    <li>外盘<span class=\"font-red\">{{dynaData.WaiPan}}</span></li>\n                    <li>内盘<span class=\"font-green\">{{dynaData.NeiPan}}</span></li>\n                    <li>流通值<span>{{dynaData.LiuTongShiZhi}}</span></li>\n                    <li>市净率<span>{{dynaData.ShiJingLv}}</span></li>\n                </ul>\n            </div>\n        </div>\n        <!--港股 or 美股-->\n        <div v-else-if=\"stocktype==3 || stocktype==4\" class=\"header-info-more\" v-show=\"pankou\"  catchtouchmove=\"preventTouchMove\">\n            <div class=\"header-info-more-w\">\n                <ul class=\"more-block\">\n                    <li>振幅<span>{{dynaData.ZhenFu}}</span></li>\n                    <li>今开<span :class=\"FontClass\">{{dynaData.KaiPanJia}}</span></li>\n                    <li>外盘<span class=\"font-red\">{{dynaData.WaiPan}}</span></li>\n                    <li>委比<span :class=\"{'font-red':dynaData.WeiBi>0,'font-green':dynaData.WeiBi<0,'font-gray':dynaData.WeiBi==0}\">{{dynaData.WeiBi}}</span></li>\n                </ul>\n                <ul class=\"more-block\">\n                    <li>均价<span>{{dynaData.JunJia}}</span></li>\n                    <li>昨收<span>{{dynaData.ZuoShou}}</span></li>\n                    <li>内盘<span class=\"font-green\">{{dynaData.NeiPan}}</span></li>\n                </ul>\n            </div>\n        </div>\n        <!--其他-->\n        <div v-else class=\"header-info-more\" v-show=\"pankou\"  catchtouchmove=\"preventTouchMove\">\n            <div class=\"header-info-more-w\">\n                <ul class=\"more-block\">\n                    <li>涨停<span class=\"font-red\">{{dynaData.ZhangTing}}</span></li>\n                    <li>今开<span :class=\"FontClass\">{{dynaData.KaiPanJia}}</span></li>\n                </ul>\n                <ul class=\"more-block\">\n                    <li>跌停<span class=\"font-green\">{{dynaData.DieTing}}</span></li>\n                    <li>昨收<span>{{dynaData.ZuoShou}}</span></li>\n                </ul>\n            </div>\n        </div>\n    </header>\n    <nav class=\"nav nav-tab4\">\n        <span :class=\"{'cur':period=='min'}\" @tap=\"chgchart('min')\">分时</span>\n        <span :class=\"{'cur':period=='1day'}\" @tap=\"chgchart('1day')\">日k</span>\n        <span :class=\"{'cur':period=='week'}\" @tap=\"chgchart('week')\">周k</span>\n        <span :class=\"{'cur':period=='month'}\" @tap=\"chgchart('month')\">月k</span>\n    </nav>\n    <main  class=\"main\">\n        <div v-show=\"!pankou\" :class=\"{'main-l': IsAstock && period=='min'}\">\n            <canvas v-if=\"IsAstock\" canvas-id=\"1\" :style=\"{width:chartWidth+'px',height:chartHeight+'px'}\"></canvas>\n            <canvas v-else canvas-id=\"2\" :style=\"{width:chartWidth2+'px',height:chartHeight+'px'}\"></canvas>\n        </div>\n        <div v-if=\"IsAstock && period=='min'\" class=\"main-r\">\n            <div class=\"main-r-tab\"><span :class=\"{'cur':fiveOrFenbi}\" @tap='chgfiveorfenbi'>五档</span><span :class=\"{'cur':!fiveOrFenbi}\" @tap='chgfiveorfenbi'>明细</span></div>\n            <div class=\"main-r-content\"@tap=\"chgfiveorfenbi\" v-show=\"fiveOrFenbi\">\n                <div class=\"flevel flevel-sell\">\n                    <p><span>卖五</span><span :class=\"{'font-red':dynaData.WeiTuoMaiChuJia5>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiChuJia5<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiChuJia5==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiChuJia5Txt}}</span><span>{{dynaData.WeiTuoMaiChuLiang5Txt}}</span></p>\n                    <p><span>卖四</span><span :class=\"{'font-red':dynaData.WeiTuoMaiChuJia4>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiChuJia4<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiChuJia4==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiChuJia4Txt}}</span><span>{{dynaData.WeiTuoMaiChuLiang4Txt}}</span></p>\n                    <p><span>卖三</span><span :class=\"{'font-red':dynaData.WeiTuoMaiChuJia3>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiChuJia3<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiChuJia3==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiChuJia3Txt}}</span><span>{{dynaData.WeiTuoMaiChuLiang3Txt}}</span></p>\n                    <p><span>卖二</span><span :class=\"{'font-red':dynaData.WeiTuoMaiChuJia2>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiChuJia2<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiChuJia2==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiChuJia2Txt}}</span><span>{{dynaData.WeiTuoMaiChuLiang2Txt}}</span></p>\n                    <p><span>卖一</span><span :class=\"{'font-red':dynaData.WeiTuoMaiChuJia1>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiChuJia1<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiChuJia1==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiChuJia1Txt}}</span><span>{{dynaData.WeiTuoMaiChuLiang1Txt}}</span></p>\n                </div>\n                <div class=\"flevel flevel-buy\">\n                    <p><span>买一</span><span :class=\"{'font-red':dynaData.WeiTuoMaiRuJia1>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiRuJia1<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiRuJia1==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiRuJia1Txt}}</span><span>{{dynaData.WeiTuoMaiRuLiang1Txt}}</span></p>\n                    <p><span>买二</span><span :class=\"{'font-red':dynaData.WeiTuoMaiRuJia2>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiRuJia2<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiRuJia2==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiRuJia2Txt}}</span><span>{{dynaData.WeiTuoMaiRuLiang2Txt}}</span></p>\n                    <p><span>买三</span><span :class=\"{'font-red':dynaData.WeiTuoMaiRuJia3>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiRuJia3<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiRuJia3==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiRuJia3Txt}}</span><span>{{dynaData.WeiTuoMaiRuLiang3Txt}}</span></p>\n                    <p><span>买四</span><span :class=\"{'font-red':dynaData.WeiTuoMaiRuJia4>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiRuJia4<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiRuJia4==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiRuJia4Txt}}</span><span>{{dynaData.WeiTuoMaiRuLiang4Txt}}</span></p>\n                    <p><span>买五</span><span :class=\"{'font-red':dynaData.WeiTuoMaiRuJia5>dynaData.ZuoShou,'font-green':dynaData.WeiTuoMaiRuJia5<dynaData.ZuoShou,'font-gray':dynaData.WeiTuoMaiRuJia5==dynaData.ZuoShou}\">{{dynaData.WeiTuoMaiRuJia5Txt}}</span><span>{{dynaData.WeiTuoMaiRuLiang5Txt}}</span></p>\n                </div>\n            </div>\n            <div class=\"main-r-content\" @tap=\"chgfiveorfenbi\" v-show=\"!fiveOrFenbi\">\n                <div class=\"r-trade\">\n                    <p v-for=\"(fenbi,index) in fenbiList\">\n                        <span>{{fenbi.ShiJian}}</span>\n                        <span class=\"font-green\">{{fenbi.ChengJiaoJia}}</span>\n                        <span class=\"font-green\">{{fenbi.DanCiChengJiaoLiang}}</span>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </main>\n    <section class=\"news\">\n        <h2 class=\"news-tit\">相关新闻</h2>\n        <div v-if=\"stockNewsList.length>0\" class=\"news-list\" >\n            <div class=\"item\" v-for=\"(news,index) in stockNewsList\">\n                <a :href=\"'/pages/newsdetail/main?jsonurl='+news.url\">\n                    <h3>{{news.title}}</h3>\n                    <p>\n                        <span class=\"fl\">{{news.source}}</span>\n                        <span class=\"fr\">{{news.otime}}</span>\n                    </p>\n                </a>\n            </div>\n            <p v-show=\"newsCurPage<=4\" class=\"load-more\" @tap=\"lower()\">点击加载更多</p>\n        </div>\n        <div v-else class=\"blank\">\n            <p>暂无数据</p>\n        </div>\n    </section>\n    <footer class=\"footer\">\n        <span v-if=\"isPortfolio\" class=\"ft-btn ft-btn-minus\" @tap=\"chgPortfolio\"><i></i>删自选</span>\n        <span v-else class=\"ft-btn\" @tap=\"chgPortfolio\"><i></i>加自选</span>\n    </footer>\n    <p class=\"pop-alert\" v-show=\"AlterShowFlag\">{{AlterTxt}}自选股成功</p>\n    <aside v-show=\"fromApp\" class=\"side-bar\" :class=\"{'foldUp':isFoldUp}\" >\n        <button open-type=\"launchApp\" :app-parameter=\"'dzh_browser_url&goto=0&type=2970&code='+code+'&kind=1'\" @error=\"launchAppError\" class=\"right-bar right-bar1\">打开<br>APP</button>\n        <button app-parameter=\"\" class=\"right-bar right-bar2\" @tap='gohome'>去首页</button>\n        <span class=\"side-bar-icon\" @tap=\"chgFoldUp\"></span>\n    </aside>\n</div>\n\n</template>\n\n<script>\nimport {Dzhyun, formatNumber, formatDate, noop , yunToken} from '@/utils/util.js'\nimport stockManager from '@/utils/stockManager.js'\nimport store from '@/store/index.js'\n\nimport DataProvider from '@/charts/DataProvider.js';\nimport Canvas from '@/charts/Canvas.js';\nimport MinChart from '@/charts/MinChart.js';\nimport KlineChart from '@/charts/KlineChart.js';\n\n\nexport default {\n    data(){\n        return {\n            code:'SH601519',             //jsonUrl\n            YunDzhObj:'',           //云平台行情源对象\n            subHqD:'',              //订阅行情数据对象\n            zsHqd:'',               //订阅指数行情\n            fenbiHqD:'',            //分笔行情数据\n            chartType: 'min',\n            period:'min',\n            dynaData:this.formatDyanData({}),    //同步数据\n            zsDynaData:'',                       //指数行情数据\n            chartDataProvider:'',           //数据集\n            chartWidth:'',                   //图宽\n            chartHeight:'',                  //图高\n            chartWidth2:'',                   //图宽\n            chartHeight2:'',                  //图高\n            canvas:{},                  //画布\n            isPortfolio:false,         //是否是自选股\n            removePortListener:'',         //删除自选监听\n            pankou:false,                 //盘口\n            stockNewsList:[],                //个股新闻\n            newsCurPage:1,                  //新闻当前页\n            AlterShowFlag:0,\n            AlterTxt:'',\n            fromApp:false,          //是否app打开\n            isFoldUp:false,\n            fiveOrFenbi:true,            //显示 分笔还是 五档 =true是五档 =false是分笔\n            fenbiList:[],\n            stocktype:1,            //股票类型 1=上证指数 2=A股 3=港股 4=美股\n            IsAstock:false,\n        }\n    },\n    computed:{\n        FontClass(){\n            let _class = '';\n            if (this.dynaData.ZhangFu > 0) {\n                _class = 'font-red';\n            } else if (this.dynaData.ZhangFu < 0) {\n                _class = 'font-green';\n            } else {\n                _class = 'font-gray';\n            }\n            return _class;\n        }\n    },\n    onLoad(options){\n        let self = this;\n\n        self.code = this.$root.$mp.query.code;\n\n        this.chkStockType(self.code);\n        //this.chartDataProvider = new DataProvider({obj:this.code});\n        this.YunDzhObj = store.state.wsobj;\n        this.loadDyanData();\n\n        if (this.stocktype == 1) {\n            this.loadZsDyanData(self.code);\n        }\n\n        this.loadFenbiData();\n        this.loadChart();\n\n        this.chkPortfolio();\n\n        this.removeListener = stockManager.onPortfolioChanged(() => {\n            console.log('change stock');\n                                self.AlterShowFlag = 1;\n                                if (self.isPortfolio) {\n                                    self.AlterTxt = '删除';\n                                }else{\n                                    self.AlterTxt = '添加';\n                                }\n                                self.chkPortfolio();\n                                setTimeout(()=>{\n                                    self.AlterShowFlag = 0;\n                                    self.AlterTxt = '';\n                                },700);\n                            });\n    },\n    onShow(){\n        let self = this;\n\n        if (this.stockNewsList.length == 0) {\n            this.stocknews();\n        }\n        //判断是否app打开\n        wx.getStorage({\n              key: 'wx.scene',\n              success: function(res) {\n                  if (res.data == 1036 || res.data == 1089 || res.data == 1090) {\n                    self.fromApp = true;\n                  } else {\n                    self.fromApp = false;\n                  }\n              }\n        });\n    },\n    methods: {\n        preventTouchMove(){\n            return 0;\n        },\n        chkStockType(code){\n            if(['SH000001','SZ399001','SZ399006'].includes(code)){\n                this.stocktype = 1;\n            } else if(code.substr(0,4) == 'SH60' || code.substr(0,4) == 'SZ00' || code.substr(0,4) == 'SZ30'){\n                this.stocktype = 2;\n                this.IsAstock = true;\n            } else if(code.substr(0,2) == 'HK') {\n                this.stocktype = 3;\n            } else if(code.substr(0,2) == 'NY' || code.substr(0,2) == 'NS') {\n                this.stocktype = 4;\n            } else {\n                this.stocktype = 5;\n            }\n        },\n        launchAppError(e){\n            wx.showModal({\n                title: '小帖士',\n                content: \"请前往APP商城下载大智慧 \\n 为您提供更专业的服务\",\n                success: function (res) {\n                    if (res.confirm) {\n                        console.log('点击确定')\n                    }else{\n                       console.log('点击取消')\n                    }\n                }\n            })\n        },\n        chgfiveorfenbi(){\n            this.fiveOrFenbi = !this.fiveOrFenbi;\n        },\n        gohome(){\n            wx.switchTab({\n              url: '/pages/dzh/main'\n            })\n        },\n        chgFoldUp(){\n            this.isFoldUp = !this.isFoldUp;\n        },\n        fmtNum(num){\n            if (num>10000 * 10000 * 10000) {\n                return (num/(10000 * 10000 * 10000)).toFixed(2) + '万亿';\n            } else if (num>10000 * 10000) {\n                return (num/(10000 * 10000)).toFixed(2) + '亿';\n            } else if (num>10000 ) {\n                return (num/(10000)).toFixed(2) + '万';\n            } else {\n                return num;\n            }\n        },\n        chkPortfolio(){\n            let self = this;\n            stockManager.inPortfolio(self.code).then((result) => {\n                self.isPortfolio = result\n            });\n        },\n        chgPortfolio(){\n            if (this.isPortfolio) { //isPortfolio = true 删自选\n                stockManager.removePortfolio(this.code);\n            } else {    //isPortfolio = false 加自选\n                stockManager.addPortfolio(this.code);\n            }\n        },\n        chkpankou(){\n            this.pankou = !this.pankou;\n        },\n        chgchart(ctype){\n            if (ctype == this.chartType) {\n                return 0;\n            }\n\n            if(ctype=='min'){\n                this.chartType = ctype;\n            }else{\n                this.chartType = 'kline';\n            }\n\n            this.period = ctype;\n            this.chartDataProvider.cancel();    //切换图，停止订阅之前的图\n            this.loadChart();\n        },\n        formatDyanData(data){\n            console.log('formatDyanData',data);\n            return Object.assign({}, data, {\n                upDown: data.ZhangDie > 0 ? 1 : data.ZhangDie < 0 ? 2 : 0,\n                ShiJian: data.ShiJian ? formatDate(data.ShiJian * 1000, 'yyyy-MM-dd hh:mm:ss') : '--',\n                ZuiXinJia: formatNumber(data.ZuiXinJia),\n                ZhangDie: formatNumber(data.ZhangDie),\n                ZhangFuTxt: formatNumber(data.ZhangFu / 100, 2, '%'),\n                KaiPanJia: formatNumber(data.KaiPanJia),\n                ZuoShou: formatNumber(data.ZuoShou),\n                ZuiGaoJia: formatNumber(data.ZuiGaoJia),\n                ZuiDiJia: formatNumber(data.ZuiDiJia),\n                ChengJiaoLiang: (!data.ChengJiaoLiang)?'--':this.fmtNum(data.ChengJiaoLiang),\n                HuanShou: formatNumber(data.HuanShou),\n                ShiYingLv: (!data.ShiYingLv)?'--':formatNumber(data.ShiYingLv),\n                JingTaiShiYingLv: formatNumber(data.JingTaiShiYingLv),\n                ZongShiZhi: (!data.ZongShiZhi)?'--':this.fmtNum(data.ZongShiZhi*10000),\n                ChengJiaoE: (!data.ChengJiaoE)?'--':this.fmtNum(data.ChengJiaoE),\n                LiuTongShiZhi: (!data.LiuTongShiZhi)?'--':this.fmtNum(data.LiuTongShiZhi*10000),\n                WaiPan:(!data.WaiPan)?'--':data.WaiPan/100,\n                NeiPan:(!data.NeiPan)?'--':Math.abs(data.NeiPan)/100,\n                WeiTuoMaiChuJia1Txt:(!data.WeiTuoMaiChuJia1)?'--':data.WeiTuoMaiChuJia1,\n                WeiTuoMaiChuJia2Txt:(!data.WeiTuoMaiChuJia2)?'--':data.WeiTuoMaiChuJia2,\n                WeiTuoMaiChuJia3Txt:(!data.WeiTuoMaiChuJia3)?'--':data.WeiTuoMaiChuJia3,\n                WeiTuoMaiChuJia4Txt:(!data.WeiTuoMaiChuJia4)?'--':data.WeiTuoMaiChuJia4,\n                WeiTuoMaiChuJia5Txt:(!data.WeiTuoMaiChuJia5)?'--':data.WeiTuoMaiChuJia5,\n                WeiTuoMaiChuLiang1Txt:(!data.WeiTuoMaiChuLiang1)?'--':data.WeiTuoMaiChuLiang1/100,\n                WeiTuoMaiChuLiang2Txt:(!data.WeiTuoMaiChuLiang2)?'--':data.WeiTuoMaiChuLiang2/100,\n                WeiTuoMaiChuLiang3Txt:(!data.WeiTuoMaiChuLiang3)?'--':data.WeiTuoMaiChuLiang3/100,\n                WeiTuoMaiChuLiang4Txt:(!data.WeiTuoMaiChuLiang4)?'--':data.WeiTuoMaiChuLiang4/100,\n                WeiTuoMaiChuLiang5Txt:(!data.WeiTuoMaiChuLiang5)?'--':data.WeiTuoMaiChuLiang5/100,\n                WeiTuoMaiRuJia1Txt:(!data.WeiTuoMaiRuJia1)?'--':data.WeiTuoMaiRuJia1,\n                WeiTuoMaiRuJia2Txt:(!data.WeiTuoMaiRuJia2)?'--':data.WeiTuoMaiRuJia2,\n                WeiTuoMaiRuJia3Txt:(!data.WeiTuoMaiRuJia3)?'--':data.WeiTuoMaiRuJia3,\n                WeiTuoMaiRuJia4Txt:(!data.WeiTuoMaiRuJia4)?'--':data.WeiTuoMaiRuJia4,\n                WeiTuoMaiRuJia5Txt:(!data.WeiTuoMaiRuJia5)?'--':data.WeiTuoMaiRuJia5,\n                WeiTuoMaiRuLiang1Txt:(!data.WeiTuoMaiRuLiang1)?'--':data.WeiTuoMaiRuLiang1/100,\n                WeiTuoMaiRuLiang2Txt:(!data.WeiTuoMaiRuLiang2)?'--':data.WeiTuoMaiRuLiang2/100,\n                WeiTuoMaiRuLiang3Txt:(!data.WeiTuoMaiRuLiang3)?'--':data.WeiTuoMaiRuLiang3/100,\n                WeiTuoMaiRuLiang4Txt:(!data.WeiTuoMaiRuLiang4)?'--':data.WeiTuoMaiRuLiang4/100,\n                WeiTuoMaiRuLiang5Txt:(!data.WeiTuoMaiRuLiang5)?'--':data.WeiTuoMaiRuLiang5/100,\n                LiuTongAGu: (!data.LiuTongAGu)?'--':this.fmtNum(data.LiuTongAGu*10000),\n                ZongGuBen: (!data.ZongGuBen)?'--':this.fmtNum(data.ZongGuBen*10000),\n                WeiBi:(!data.WeiBi)?'--':data.WeiBi,\n                JunJia:(!data.JunJia)?'--':data.JunJia,\n                ShiJingLv: (!data.ShiJingLv)?'--':(data.ShiJingLv).toFixed(2),\n                ZhenFu:(!data.ZhenFu)?'--':data.ZhenFu,\n                LiangBi:(!data.LiangBi)?'--':data.LiangBi,\n                XianShou:(!data.XianShou)?'--':(data.XianShou/1000000).toFixed(2),\n            });\n        },\n        // 加载指数 相关 动态行情 数据\n        loadZsDyanData(code){\n            let _block = '';\n            let self = this;\n\n            if (code == 'SH000001') {\n                _block = '市场/沪深市场/上证A股';\n            } else if(code == 'SZ399001') {\n                _block = '市场/沪深市场/深证A股';\n            } else if(code == 'SZ399006') {\n                _block = '市场/沪深市场/创业板';\n            }\n\n            let params = {\n                    gql:'block=' + _block,\n                    field: 'LiuTongShiZhi,ZongShiZhi',\n            };\n            self.zsDynaData='';\n\n            self.zsHqD = self.YunDzhObj.query(\"/blockstat\",params,res=>{\n                                let _res = res[0];\n                                _res.LiuTongShiZhi = self.fmtNum(_res.LiuTongShiZhi*10000);\n                                _res.ZongShiZhi = self.fmtNum(_res.ZongShiZhi*10000);\n\n                                self.zsDynaData = _res;\n                            });\n        },\n        // 加载动态行情\n        loadDyanData() {\n            let self = this;\n            let _params = {\n                    obj: self.code,\n                    field: 'XianShou,ZuoShou,ChengJiaoE,ShiJingLv,LiuTongShiZhi,NeiPan,WaiPan,JunJia,JingTaiShiYingLv,ShiYingLv,ZongGuBen,LiuTongAGu,WeiBi,ZhenFu,ZhangTing,DieTing,ZuiXinJia,ZhongWenJianCheng,ZhangDie,ZhangFu,ShiJian,KaiPanJia,ZuoShou,ZuiGaoJia,ZuiDiJia,ChengJiaoLiang,HuanShou,ShiYingLv,LiangBi,ZongShiZhi,WeiTuoMaiRuJia1,WeiTuoMaiRuJia2,WeiTuoMaiRuJia3,WeiTuoMaiRuJia4,WeiTuoMaiRuJia5,WeiTuoMaiRuLiang1,WeiTuoMaiRuLiang2,WeiTuoMaiRuLiang3,WeiTuoMaiRuLiang4,WeiTuoMaiRuLiang5,WeiTuoMaiChuJia1,WeiTuoMaiChuJia2,WeiTuoMaiChuJia3,WeiTuoMaiChuJia4,WeiTuoMaiChuJia5,WeiTuoMaiChuLiang1,WeiTuoMaiChuLiang2,WeiTuoMaiChuLiang3,WeiTuoMaiChuLiang4,WeiTuoMaiChuLiang5',\n                    mode:2\n                };\n\n            self.subHqD = self.YunDzhObj.subscribe('/stkdata',_params,(data)=>{\n                self.dynaData = self.formatDyanData(data[0]);\n                console.log(self.dynaData);\n                wx.setNavigationBarTitle({\n                    title: `${self.dynaData.ZhongWenJianCheng} - ${self.dynaData.Obj.substr(2)}`,\n                });\n            });\n        },\n        loadFenbiData(){\n            let self = this;\n            let _params = {\n                    obj: self.code,\n                    field: 'ShiJian,ChengJiaoJia,DanCiChengJiaoLiang,MaiMaiFangXiang',\n                    start: -12\n                };\n\n            self.subHqD = self.YunDzhObj.subscribe('/quote/tick',_params,(data)=>{\n                let _res = [];\n\n                if(data[0].hasOwnProperty('Data') && Array.isArray(data[0].Data)){\n                    _res = data[0].Data;\n                }\n\n                _res.forEach((eachObj)=>{\n                    eachObj.DanCiChengJiaoLiang = eachObj.DanCiChengJiaoLiang/100;\n                    eachObj.ShiJian = (new Date(eachObj.ShiJian*1000)).toString().substr(16,5);\n                });\n\n                if (self.fenbiList.length + _res.length <= 12) {\n                    self.fenbiList = [...self.fenbiList,..._res];\n                } else {\n                    self.fenbiList.shift(); //分笔\n                    self.fenbiList = [...self.fenbiList,..._res];\n                }\n\n            });\n\n        },\n        //加载走时图\n        loadChart() {\n            let self = this;\n\n            // 请求系统信息，得到宽高\n            wx.getSystemInfo({\n              success: (systemInfo) => {\n                self.chartDataProvider = new DataProvider({obj:self.code , prefix:0});\n                const chartWidth = systemInfo.windowWidth;\n                const chartHeight = systemInfo.windowHeight - 210;\n\n                const pixelRadio = systemInfo.pixelRatio;\n                //股票类的图像大小\n                self.chartWidth = chartWidth*0.66;\n                self.chartHeight = self.chartWidth*1.23;\n                //指数类的图像大小\n                self.chartWidth2 = chartWidth;\n                self.chartHeight2 = self.chartWidth*0.8;\n\n                if(self.period!='min') {    //k的时候隐藏 分时成交\n                    self.chartWidth=chartWidth;\n                }\n\n                if (self.IsAstock) {\n                    self.canvas[self.chartType] = new Canvas({\n                      pixelRadio,\n                      canvasId: 1,\n                      width: self.chartWidth,\n                      height: self.chartHeight,\n                    });\n                } else {\n                    self.canvas[self.chartType] = new Canvas({\n                      pixelRadio,\n                      canvasId: 2,\n                      width: self.chartWidth2,\n                      height: self.chartHeight,\n                    });\n                }\n\n                self.showChart();\n              },\n            });\n        },\n        showChart() {\n            let currentChart;\n\n            if (this.chartType === 'min') {\n              //currentChart = this.minChart = this.minChart || new MinChart(this.chartDataProvider);\n              currentChart = new MinChart(this.chartDataProvider,{\"IsAstock\":this.IsAstock,\"upColor\":\"#fe6b6d\",\"downColor\":\"#67b883\",\"stock\":this.code});\n            } else {\n              const klineChartName = `klineChart${this.period}`;\n              //currentChart = this[klineChartName] = this[klineChartName] || new KlineChart(this.chartDataProvider, { period: this.period });\n              currentChart = new KlineChart(this.chartDataProvider, { period: this.period ,\"stock\":this.code});\n\n            }\n\n            console.log('currentChart',currentChart);\n            this.canvas[this.chartType].show(currentChart);\n\n        },\n        cancel() {\n            this.IsAstock = false;\n            this.pankou = false;\n            this.canvas = {};\n            this.chartType = 'min';\n            this.period = 'min';\n            this.subHqD.cancel();\n            this.chartDataProvider.cancel();\n            this.removeListener();\n            this.stockNewsList = [];\n            this.subHqD.cancel();\n            this.fenbiList=[];\n            this.zsHqd && this.zsHqd.cancel();\n        },\n        stocknews(start=1) {\n            let self = this;\n            let obj = self.code;\n            let jsonurl = \"\";\n            //https://mnews.gw.com.cn/wap/data/ipad/stock/SH/05/600005/list/1.json\n            if (obj.substr(0,2) == 'NY' || obj.substr(0,2) == 'NS') {\n                 jsonurl = 'https://mnews.gw.com.cn/wap/data/ipad/stock/'+ obj.substring(0, 2) + \"/\" + obj + \"/list/\" + start + \".json\";\n            } else {\n                 jsonurl = 'https://mnews.gw.com.cn/wap/data/ipad/stock/'+ obj.substr(0,2) + '/' + obj.substr(-2) + '/' + obj.substr(2) + '/list/'+start+'.json';\n            }\n\n            console.log(jsonurl);\n            wx.request({url: jsonurl,\n                        data:{},\n                        header: {'content-type':'application/json'},\n                        success: function(res) {\n                           if (typeof res.data != 'string') {\n                            let _resNewsList = self.fmtData(res.data[0].data);\n\n                            _resNewsList.forEach((d)=>{\n                                if (d.url.substr(0,5) != 'https') {\n                                    d.url = 'https' + d.url.substr(4);\n                                }\n                            });\n\n                            self.stockNewsList = [...self.stockNewsList,..._resNewsList];\n                           }\n                        },\n                        fail: (error)=>{console.log(error)}\n                    });\n        },\n        lower(){\n            if (this.newsCurPage > 4) {\n                return 0;\n            } else {\n                this.newsCurPage++;\n            }\n\n            this.stocknews(this.newsCurPage);\n        },\n        fmtData(paraList) { //格式化时间\n            paraList.forEach((eachObj)=>eachObj.shortTime = eachObj.otime.substr(14));\n            return paraList;\n        }\n    },\n    onHide(){\n        console.log('i am onHide...');\n    },\n    onUnload() {\n        this.cancel();\n        console.log('i am onUnload...');\n    },\n    onShareAppMessage() {\n        const code = this.code;\n        const dynaData = this.dynaData;\n        return {\n          title: `${dynaData.ZhongWenJianCheng} - ${dynaData.Obj.substr(2)}`,\n          desc: `最新价:${dynaData.ZuiXinJia} 涨跌幅:${dynaData.ZhangFu}`,\n          path: `/pages/stock/main?code=${code}`,\n        };\n    }\n}\n</script>\n<style>\n    /* init */\n    body,button,input,select,textarea{font:12px/1 Arial,San Francisco,Helvetica,SimHei,SimSun,sans-serif;}\n    h1,h2,h3,h4,h5,h6,b,strong{font-weight: normal;}\n    button,input,select,textarea{padding: 0;background: none;border: 0;font-size: inherit;}\n    input:focus,textarea:focus,button:focus{outline:0;}\n    ul,ol,li{list-style: none;}\n    i{font-style: normal;}\n    a{text-decoration: none;}\n    img{display: block;}\n    *{padding: 0;margin:0;}\n\n    /* common */\n    .flex{display: -webkit-box;display: -webkit-flex;display: -ms-flexbox;display: flex;}\n    .space{-webkit-box-flex: 1; -webkit-flex: 1; -ms-flex: 1;flex: 1;}\n    .mod-red:before{background:#ef3939;}\n    .mod-green:before{background:#01aa3b;}\n    .mod-gray:before{background:#8e9ab7;}\n    .font-red{color:#ef3939;}\n    .font-green{color:#01aa3b;}\n    .font-gray{color:#8e9ab7;}\n    .block-red{background:#f24957;}\n    .block-green{background:#13a977;}\n    .block-gray{background:#8e9ab7;}\n    .fl{float: left;}\n    .fr{float: right;}\n\n    /* 0.5顶边 */\n    .news:before{\n        content: '';position: absolute;left: 0;top: 0;width: 100%;height: 100%;background: -webkit-linear-gradient(top, #e5e5e5 60%, transparent 60%) no-repeat left top;background: linear-gradient(top, #e5e5e5 60%, transparent 60%) no-repeat left top;-webkit-background-size: 100% 1px;background-size: 100% 1px;z-index: -1;\n    }\n    /* 0.5底边 */\n    .history-list li:after,.news-tit:after,.main:before{\n        content: '';position: absolute;left: 0;top: 0;width: 100%;height: 100%;background: -webkit-linear-gradient(bottom, #e5e5e5 60%, transparent 60%) no-repeat left bottom;background: linear-gradient(bottom, #e5e5e5 60%, transparent 60%) no-repeat left bottom;-webkit-background-size: 100% 1px;background-size: 100% 1px;z-index: -1;\n    }\n    .news-list .item:after{\n        content: '';position: absolute;left: 10px;top: 0;right:10px;height: 100%;background: -webkit-linear-gradient(bottom, #e5e5e5 60%, transparent 60%) no-repeat left bottom;background: linear-gradient(bottom, #e5e5e5 60%, transparent 60%) no-repeat left bottom;-webkit-background-size: 100% 1px;background-size: 100% 1px;z-index: -1;\n    }\n    \n    .mb10:after{content:'';position: absolute;left:0;right:0;bottom:-10px;background:#f3f3f7;height: 10px;}\n    .header{padding: 10px 16px 13px;position: relative;/* overflow:hidden; */height: 65px;z-index: 100;}\n    .header-index{width: 40%;float: left;font-weight: bold;}\n    .header-info{width: 19%;font-size: 12px;float:right;}\n    .header-index > span{font-size: 40px;}\n    .header-index > p{font-size: 17px;margin-top: 6px;}\n    .header-index > p span:first-child{margin-right: 10px;}\n    .header-info:nth-of-type(2){margin-right: 10px;}\n    .header-info p:nth-of-type(odd){color: #777;margin: 4px 0 3px;}\n    .header-info p:nth-of-type(even){color: #000;}\n    .header-info p:nth-of-type(2){margin-bottom: 7px;}\n    .header-btn{position: absolute;right:17px;top:21px;font-size: 12px;color:#3267c7;width:15px;height:36px;border:1px solid #3267c7;border-radius: 2px;text-align: center;padding-top: 4px;z-index: 3;}\n    .header-btn:after{content:'';position: absolute;bottom:5px;left:50%;width:5px;height:5px;border-left: 1px solid #3267c7;border-bottom: 1px solid #3267c7;-webkit-transform:translate(-50%,0) rotate(-45deg);-ms-transform:translate(-50%,0) rotate(-45deg);transform:translate(-50%,0) rotate(-45deg);}\n    .header-btn.up:after{-webkit-transform:translate(-50%,0) rotate(-225deg);-ms-transform:translate(-50%,0) rotate(-225deg);transform:translate(-50%,0) rotate(-225deg);bottom:2px;}\n    .nav{background: #f0f4fc;height: 35px;padding: 0 15px;}\n    .nav span{font-size:14px;color:#666;line-height: 35px;float: left;text-align: center;font-weight: 700;}\n    .nav span.cur,.main-r-tab span.cur{color:#3e6ac5;position: relative;}\n    .nav-tab4 span{width: 25%;}\n    .nav span.cur:after{content:'';position: absolute;bottom:0;left:13px;right: 13px;height: 2px;background:#3e6ac5;}\n    .main-r-tab span.cur:after{content:'';position: absolute;bottom:0;left:13px;right: 13px;height: 1px;background:#3e6ac5;}\n    .main{/*border-bottom: 1px solid #e5e5e5; overflow:hidden; */position: relative;/* margin-bottom: 10px; */}\n    .main-l{float: left;width:66%;border-right:1px solid #e5e5e5;-webkit-box-sizing: border-box;box-sizing: border-box;}\n    .main-r{margin-left: 66%;height: 305px;position: relative;}\n    .main-r-content{height: 100%;-webkit-box-sizing: border-box;box-sizing: border-box;padding-bottom: 22px;}\n    .r-trade{height: 100%;}\n    .main-r-tab{position: absolute;right: 0;left: 0;bottom: 0;height:22px;text-align: center;background: #f0f4fc;}\n    .main-r-tab span{font-size:12px;color:#0e0d0b;line-height:22px;width: 50%;float: left;}\n    .canvas{width: 100%;}\n    .canvas-line{height:202px;}\n    .canvas-bar{height: 102px;}\n    .canvas-line,.flevel-sell{border-bottom: 1px solid #e5e5e5;box-sizing: border-box;-webkit-box-sizing: border-box;}\n    .flevel{height: 50%;}\n    .flevel p{padding: 0 10px 0 9px;height: 20%;display: table;width: 100%;box-sizing: border-box;-webkit-box-sizing: border-box;}\n    .r-trade p{padding: 0 10px 0 9px;height: 8.33%;display: table;width: 100%;box-sizing: border-box;-webkit-box-sizing: border-box;}\n    .flevel p span,.r-trade p span{display: inline-block;font-size: 11px;width: 33%;display: table-cell;vertical-align: middle;}\n    .flevel p span:nth-of-type(1),.r-trade p span:nth-of-type(1){width: 34%;}\n    .flevel p span:nth-of-type(2),.r-trade p span:nth-of-type(2){padding-left: 2px;}\n    .flevel p span:nth-of-type(3),.r-trade p span:nth-of-type(3){text-align: right;}\n    .news{margin:0 auto;position: relative;z-index: 1;padding-bottom: 50px;}\n    .news-tit{line-height: 36px;font-size: 15px;padding: 0 15px;position: relative;z-index: 1;color: #333;}\n    .news-tit:before{content:'';position: absolute;left:6px;top: 50%;width:3px;height:14px;background:#5d85ea;border-radius: 5px;margin-top: -7px;}\n    .news-list{}\n    .news-list .item{padding: 12px 15px 10px;position: relative;z-index: 1;}\n    .news-list .item h3{font-size: 16px;color: #333;line-height: 1.4;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp:2; -webkit-box-orient:vertical;}\n    .news-list .item p{font-size:12px;color:#666;margin-top:10px;height:12px;}\n    .footer{position: fixed;bottom:0;left: 0;right: 0;z-index:5;}\n    .ft-btn{line-height:49px;background:#5f87e7;font-size:18px;text-align: center;color: #fff;display: block;}\n    .ft-btn i{display: inline-block;vertical-align:-4px;margin-right: 8px;width: 16px;height: 16px;border-radius: 50%;border:2px solid #fff;position: relative;}\n    .ft-btn i:before,.ft-btn i:after{content: '';position: absolute;left: 50%;top: 50%;background: #fff;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}\n    .ft-btn i:before{width: 2px;height: 7px;}\n    .ft-btn i:after{width: 7px;height: 2px;}\n    .ft-btn-minus{background: #aeccf4;}\n    .ft-btn-minus i:before{content: none;}\n    .header-info-more{position: fixed;left: 0;right: 0;top: 83px;bottom:0;background: rgba(0,0,0,.5);z-index:100;/* -webkit-transform:translate(0,-200%);-ms-transform:translate(0,-200%);transform:translate(0,-200%);-webkit-transition:all .3s;-o-transition:all .3s;transition:all .3s; */}\n    /* .header-info-more.flyIn{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);} */\n    .header-info-more-w{background: #fff;overflow:hidden;}\n    .more-block{padding:5px 16px;-webkit-box-sizing: border-box;box-sizing: border-box;float: left;width: 50%;}\n    .more-block li{font-size: 14px;color: #333;line-height: 25px;}\n    .more-block li span{float:right;}\n    .pop-alert{position: fixed;top: 50%;left: 50%;background: rgba(0, 0, 0, 0.7);font-size: 15px;padding:10px 15px;color: #fff;border-radius: 3px;z-index: 10;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}\n    .load-more{text-align: center;line-height: 50px;font-size: 14px;color: #666;}\n    .blank{background: #fff;font-size:15px;color: #898e99;text-align: center;padding:80px 0;}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/stock/index.vue?4a57659c","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":false,\"sourceMap\":false}!./~/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-468de450\",\"scoped\":false,\"hasInlineConfig\":false}!./~/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./~/postcss-loader/lib?{\"sourceMap\":true}!./~/mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/stock/index.vue\n// module id = 289\n// module chunks = 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('header', {\n    staticClass: \"header\",\n    attrs: {\n      \"eventid\": '0'\n    },\n    on: {\n      \"tap\": _vm.chkpankou\n    }\n  }, [_c('div', {\n    staticClass: \"header-index\"\n  }, [_c('span', {\n    class: _vm.FontClass\n  }, [_vm._v(_vm._s(_vm.dynaData.ZuiXinJia))]), _vm._v(\" \"), _c('p', {\n    class: _vm.FontClass\n  }, [_c('span', [_vm._v(_vm._s(_vm.dynaData.ZhangDie))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZhangFuTxt))])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"header-info\"\n  }, [_c('p', [_vm._v(\"最高：\")]), _c('p', [_vm._v(_vm._s(_vm.dynaData.ZuiGaoJia))]), _vm._v(\" \"), _c('p', [_vm._v(\"最低：\")]), _c('p', [_vm._v(_vm._s(_vm.dynaData.ZuiDiJia))])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"header-info\"\n  }, [_c('p', [_vm._v(\"成交量：\")]), _c('p', [_vm._v(_vm._s(_vm.dynaData.ChengJiaoLiang))]), _vm._v(\" \"), _c('p', [_vm._v(\"成交额：\")]), _c('p', [_vm._v(_vm._s(_vm.dynaData.ChengJiaoE))])], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.IsAstock),\n      expression: \"IsAstock\"\n    }],\n    staticClass: \"header-info\"\n  }, [_c('p', [_vm._v(\"总市值：\")]), _c('p', [_vm._v(_vm._s(_vm.dynaData.ZongShiZhi))]), _vm._v(\" \"), _c('p', [_vm._v(\"量比：\")]), _c('p', [_vm._v(_vm._s(_vm.dynaData.LiangBi))])], 1), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-btn\",\n    class: {\n      'up': _vm.pankou\n    }\n  }, [_vm._v(\"盘口\")]), _vm._v(\" \"), (_vm.stocktype == 1) ? _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.pankou),\n      expression: \"pankou\"\n    }],\n    staticClass: \"header-info-more\",\n    attrs: {\n      \"catchtouchmove\": \"preventTouchMove\"\n    }\n  }, [_c('div', {\n    staticClass: \"header-info-more-w\"\n  }, [_c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"涨停\"), _c('span', {\n    staticClass: \"font-red\"\n  }, [_vm._v(_vm._s(_vm.dynaData.ZhangTing))])]), _vm._v(\" \"), _c('li', [_vm._v(\"今开\"), _c('span', {\n    class: _vm.FontClass\n  }, [_vm._v(_vm._s(_vm.dynaData.KaiPanJia))])]), _vm._v(\" \"), _c('li', [_vm._v(\"振幅\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZhenFu))])]), _vm._v(\" \"), _c('li', [_vm._v(\"委比\"), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiBi > 0, 'font-green': _vm.dynaData.WeiBi < 0, 'font-gray': _vm.dynaData.WeiBi == 0\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiBi))])]), _vm._v(\" \"), _c('li', [_vm._v(\"总市值：\"), _c('span', [_vm._v(_vm._s(_vm.zsDynaData.ZongShiZhi))])])], 1), _vm._v(\" \"), _c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"跌停\"), _c('span', {\n    staticClass: \"font-green\"\n  }, [_vm._v(_vm._s(_vm.dynaData.DieTing))])]), _vm._v(\" \"), _c('li', [_vm._v(\"昨收\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZuoShou))])]), _vm._v(\" \"), _c('li', [_vm._v(\"现手\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.XianShou))])]), _vm._v(\" \"), _c('li', [_vm._v(\"量比\"), _c('span', {\n    class: _vm.FontClass\n  }, [_vm._v(_vm._s(_vm.dynaData.LiangBi))]), _c('p')], 1), _c('li', [_vm._v(\"流通值\"), _c('span', [_vm._v(_vm._s(_vm.zsDynaData.LiuTongShiZhi))])])], 1)], 1)]) : (_vm.stocktype == 2) ? _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.pankou),\n      expression: \"pankou\"\n    }],\n    staticClass: \"header-info-more\",\n    attrs: {\n      \"catchtouchmove\": \"preventTouchMove\"\n    }\n  }, [_c('div', {\n    staticClass: \"header-info-more-w\"\n  }, [_c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"涨停\"), _c('span', {\n    staticClass: \"font-red\"\n  }, [_vm._v(_vm._s(_vm.dynaData.ZhangTing))])]), _vm._v(\" \"), _c('li', [_vm._v(\"振幅\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZhenFu))])]), _vm._v(\" \"), _c('li', [_vm._v(\"委比\"), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiBi > 0, 'font-green': _vm.dynaData.WeiBi < 0, 'font-gray': _vm.dynaData.WeiBi == 0\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiBi))])]), _vm._v(\" \"), _c('li', [_vm._v(\"流通股\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.LiuTongAGu))])]), _vm._v(\" \"), _c('li', [_vm._v(\"总股本\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZongGuBen))])]), _vm._v(\" \"), _c('li', [_vm._v(\"市盈率(动)\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ShiYingLv))])]), _vm._v(\" \"), _c('li', [_vm._v(\"市盈率(静)\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.JingTaiShiYingLv))])])], 1), _vm._v(\" \"), _c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"跌停\"), _c('span', {\n    staticClass: \"font-green\"\n  }, [_vm._v(_vm._s(_vm.dynaData.DieTing))])]), _vm._v(\" \"), _c('li', [_vm._v(\"均价\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.JunJia))])]), _vm._v(\" \"), _c('li', [_vm._v(\"今开\"), _c('span', {\n    class: _vm.FontClass\n  }, [_vm._v(_vm._s(_vm.dynaData.KaiPanJia))])]), _vm._v(\" \"), _c('li', [_vm._v(\"外盘\"), _c('span', {\n    staticClass: \"font-red\"\n  }, [_vm._v(_vm._s(_vm.dynaData.WaiPan))])]), _vm._v(\" \"), _c('li', [_vm._v(\"内盘\"), _c('span', {\n    staticClass: \"font-green\"\n  }, [_vm._v(_vm._s(_vm.dynaData.NeiPan))])]), _vm._v(\" \"), _c('li', [_vm._v(\"流通值\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.LiuTongShiZhi))])]), _vm._v(\" \"), _c('li', [_vm._v(\"市净率\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ShiJingLv))])])], 1)], 1)]) : (_vm.stocktype == 3 || _vm.stocktype == 4) ? _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.pankou),\n      expression: \"pankou\"\n    }],\n    staticClass: \"header-info-more\",\n    attrs: {\n      \"catchtouchmove\": \"preventTouchMove\"\n    }\n  }, [_c('div', {\n    staticClass: \"header-info-more-w\"\n  }, [_c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"振幅\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZhenFu))])]), _vm._v(\" \"), _c('li', [_vm._v(\"今开\"), _c('span', {\n    class: _vm.FontClass\n  }, [_vm._v(_vm._s(_vm.dynaData.KaiPanJia))])]), _vm._v(\" \"), _c('li', [_vm._v(\"外盘\"), _c('span', {\n    staticClass: \"font-red\"\n  }, [_vm._v(_vm._s(_vm.dynaData.WaiPan))])]), _vm._v(\" \"), _c('li', [_vm._v(\"委比\"), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiBi > 0, 'font-green': _vm.dynaData.WeiBi < 0, 'font-gray': _vm.dynaData.WeiBi == 0\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiBi))])])], 1), _vm._v(\" \"), _c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"均价\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.JunJia))])]), _vm._v(\" \"), _c('li', [_vm._v(\"昨收\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZuoShou))])]), _vm._v(\" \"), _c('li', [_vm._v(\"内盘\"), _c('span', {\n    staticClass: \"font-green\"\n  }, [_vm._v(_vm._s(_vm.dynaData.NeiPan))])])], 1)], 1)]) : _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.pankou),\n      expression: \"pankou\"\n    }],\n    staticClass: \"header-info-more\",\n    attrs: {\n      \"catchtouchmove\": \"preventTouchMove\"\n    }\n  }, [_c('div', {\n    staticClass: \"header-info-more-w\"\n  }, [_c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"涨停\"), _c('span', {\n    staticClass: \"font-red\"\n  }, [_vm._v(_vm._s(_vm.dynaData.ZhangTing))])]), _vm._v(\" \"), _c('li', [_vm._v(\"今开\"), _c('span', {\n    class: _vm.FontClass\n  }, [_vm._v(_vm._s(_vm.dynaData.KaiPanJia))])])], 1), _vm._v(\" \"), _c('ul', {\n    staticClass: \"more-block\"\n  }, [_c('li', [_vm._v(\"跌停\"), _c('span', {\n    staticClass: \"font-green\"\n  }, [_vm._v(_vm._s(_vm.dynaData.DieTing))])]), _vm._v(\" \"), _c('li', [_vm._v(\"昨收\"), _c('span', [_vm._v(_vm._s(_vm.dynaData.ZuoShou))])])], 1)], 1)])]), _vm._v(\" \"), _c('nav', {\n    staticClass: \"nav nav-tab4\"\n  }, [_c('span', {\n    class: {\n      'cur': _vm.period == 'min'\n    },\n    attrs: {\n      \"eventid\": '1'\n    },\n    on: {\n      \"tap\": function($event) {\n        _vm.chgchart('min')\n      }\n    }\n  }, [_vm._v(\"分时\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'cur': _vm.period == '1day'\n    },\n    attrs: {\n      \"eventid\": '2'\n    },\n    on: {\n      \"tap\": function($event) {\n        _vm.chgchart('1day')\n      }\n    }\n  }, [_vm._v(\"日k\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'cur': _vm.period == 'week'\n    },\n    attrs: {\n      \"eventid\": '3'\n    },\n    on: {\n      \"tap\": function($event) {\n        _vm.chgchart('week')\n      }\n    }\n  }, [_vm._v(\"周k\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'cur': _vm.period == 'month'\n    },\n    attrs: {\n      \"eventid\": '4'\n    },\n    on: {\n      \"tap\": function($event) {\n        _vm.chgchart('month')\n      }\n    }\n  }, [_vm._v(\"月k\")])]), _vm._v(\" \"), _c('main', {\n    staticClass: \"main\"\n  }, [_c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.pankou),\n      expression: \"!pankou\"\n    }],\n    class: {\n      'main-l': _vm.IsAstock && _vm.period == 'min'\n    }\n  }, [(_vm.IsAstock) ? _c('canvas', {\n    style: ({\n      width: _vm.chartWidth + 'px',\n      height: _vm.chartHeight + 'px'\n    }),\n    attrs: {\n      \"canvas-id\": \"1\"\n    }\n  }) : _c('canvas', {\n    style: ({\n      width: _vm.chartWidth2 + 'px',\n      height: _vm.chartHeight + 'px'\n    }),\n    attrs: {\n      \"canvas-id\": \"2\"\n    }\n  })]), _vm._v(\" \"), (_vm.IsAstock && _vm.period == 'min') ? _c('div', {\n    staticClass: \"main-r\"\n  }, [_c('div', {\n    staticClass: \"main-r-tab\"\n  }, [_c('span', {\n    class: {\n      'cur': _vm.fiveOrFenbi\n    },\n    attrs: {\n      \"eventid\": '5'\n    },\n    on: {\n      \"tap\": _vm.chgfiveorfenbi\n    }\n  }, [_vm._v(\"五档\")]), _c('span', {\n    class: {\n      'cur': !_vm.fiveOrFenbi\n    },\n    attrs: {\n      \"eventid\": '6'\n    },\n    on: {\n      \"tap\": _vm.chgfiveorfenbi\n    }\n  }, [_vm._v(\"明细\")])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.fiveOrFenbi),\n      expression: \"fiveOrFenbi\"\n    }],\n    staticClass: \"main-r-content\",\n    attrs: {\n      \"eventid\": '7'\n    },\n    on: {\n      \"tap\": _vm.chgfiveorfenbi\n    }\n  }, [_c('div', {\n    staticClass: \"flevel flevel-sell\"\n  }, [_c('p', [_c('span', [_vm._v(\"卖五\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiChuJia5 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiChuJia5 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiChuJia5 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuJia5Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuLiang5Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"卖四\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiChuJia4 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiChuJia4 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiChuJia4 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuJia4Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuLiang4Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"卖三\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiChuJia3 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiChuJia3 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiChuJia3 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuJia3Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuLiang3Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"卖二\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiChuJia2 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiChuJia2 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiChuJia2 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuJia2Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuLiang2Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"卖一\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiChuJia1 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiChuJia1 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiChuJia1 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuJia1Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiChuLiang1Txt))])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"flevel flevel-buy\"\n  }, [_c('p', [_c('span', [_vm._v(\"买一\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiRuJia1 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiRuJia1 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiRuJia1 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuJia1Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuLiang1Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"买二\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiRuJia2 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiRuJia2 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiRuJia2 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuJia2Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuLiang2Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"买三\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiRuJia3 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiRuJia3 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiRuJia3 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuJia3Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuLiang3Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"买四\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiRuJia4 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiRuJia4 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiRuJia4 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuJia4Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuLiang4Txt))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(\"买五\")]), _c('span', {\n    class: {\n      'font-red': _vm.dynaData.WeiTuoMaiRuJia5 > _vm.dynaData.ZuoShou, 'font-green': _vm.dynaData.WeiTuoMaiRuJia5 < _vm.dynaData.ZuoShou, 'font-gray': _vm.dynaData.WeiTuoMaiRuJia5 == _vm.dynaData.ZuoShou\n    }\n  }, [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuJia5Txt))]), _c('span', [_vm._v(_vm._s(_vm.dynaData.WeiTuoMaiRuLiang5Txt))])])], 1)]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.fiveOrFenbi),\n      expression: \"!fiveOrFenbi\"\n    }],\n    staticClass: \"main-r-content\",\n    attrs: {\n      \"eventid\": '8'\n    },\n    on: {\n      \"tap\": _vm.chgfiveorfenbi\n    }\n  }, [_c('div', {\n    staticClass: \"r-trade\"\n  }, _vm._l((_vm.fenbiList), function(fenbi, index) {\n    return _c('p', [_c('span', [_vm._v(_vm._s(fenbi.ShiJian))]), _vm._v(\" \"), _c('span', {\n      staticClass: \"font-green\"\n    }, [_vm._v(_vm._s(fenbi.ChengJiaoJia))]), _vm._v(\" \"), _c('span', {\n      staticClass: \"font-green\"\n    }, [_vm._v(_vm._s(fenbi.DanCiChengJiaoLiang))])])\n  }))])]) : _vm._e()]), _vm._v(\" \"), _c('section', {\n    staticClass: \"news\"\n  }, [_c('h2', {\n    staticClass: \"news-tit\"\n  }, [_vm._v(\"相关新闻\")]), _vm._v(\" \"), (_vm.stockNewsList.length > 0) ? _c('div', {\n    staticClass: \"news-list\"\n  }, [_vm._l((_vm.stockNewsList), function(news, index) {\n    return _c('div', {\n      staticClass: \"item\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": '/pages/newsdetail/main?jsonurl=' + news.url\n      }\n    }, [_c('h3', [_vm._v(_vm._s(news.title))]), _vm._v(\" \"), _c('p', [_c('span', {\n      staticClass: \"fl\"\n    }, [_vm._v(_vm._s(news.source))]), _vm._v(\" \"), _c('span', {\n      staticClass: \"fr\"\n    }, [_vm._v(_vm._s(news.otime))])])], 1)])\n  }), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.newsCurPage <= 4),\n      expression: \"newsCurPage<=4\"\n    }],\n    staticClass: \"load-more\",\n    attrs: {\n      \"eventid\": '9'\n    },\n    on: {\n      \"tap\": function($event) {\n        _vm.lower()\n      }\n    }\n  }, [_vm._v(\"点击加载更多\")])], 2) : _c('div', {\n    staticClass: \"blank\"\n  }, [_c('p', [_vm._v(\"暂无数据\")])], 1)], 1), _vm._v(\" \"), _c('footer', {\n    staticClass: \"footer\"\n  }, [(_vm.isPortfolio) ? _c('span', {\n    staticClass: \"ft-btn ft-btn-minus\",\n    attrs: {\n      \"eventid\": '11'\n    },\n    on: {\n      \"tap\": _vm.chgPortfolio\n    }\n  }, [_c('i'), _vm._v(\"删自选\")], 1) : _c('span', {\n    staticClass: \"ft-btn\",\n    attrs: {\n      \"eventid\": '10'\n    },\n    on: {\n      \"tap\": _vm.chgPortfolio\n    }\n  }, [_c('i'), _vm._v(\"加自选\")], 1)]), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.AlterShowFlag),\n      expression: \"AlterShowFlag\"\n    }],\n    staticClass: \"pop-alert\"\n  }, [_vm._v(_vm._s(_vm.AlterTxt) + \"自选股成功\")]), _vm._v(\" \"), _c('aside', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.fromApp),\n      expression: \"fromApp\"\n    }],\n    staticClass: \"side-bar\",\n    class: {\n      'foldUp': _vm.isFoldUp\n    }\n  }, [_c('button', {\n    staticClass: \"right-bar right-bar1\",\n    attrs: {\n      \"open-type\": \"launchApp\",\n      \"app-parameter\": 'dzh_browser_url&goto=0&type=2970&code=' + _vm.code + '&kind=1',\n      \"eventid\": '12'\n    },\n    on: {\n      \"error\": _vm.launchAppError\n    }\n  }, [_vm._v(\"打开\"), _c('br'), _vm._v(\"APP\")], 1), _vm._v(\" \"), _c('button', {\n    staticClass: \"right-bar right-bar2\",\n    attrs: {\n      \"app-parameter\": \"\",\n      \"eventid\": '13'\n    },\n    on: {\n      \"tap\": _vm.gohome\n    }\n  }, [_vm._v(\"去首页\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"side-bar-icon\",\n    attrs: {\n      \"eventid\": '14'\n    },\n    on: {\n      \"tap\": _vm.chgFoldUp\n    }\n  })], 1)], 1)\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-468de450\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-468de450\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/stock/index.vue\n// module id = 330\n// module chunks = 2"],"sourceRoot":""}